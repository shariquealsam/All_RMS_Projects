@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/Master.cshtml";
}

@* the live portal currently running on *@

<!DOCTYPE HTML>
<html>

<head>
    <title>Home Page</title>

    @*<style>
        #cover {
            margin: 0px;
            height: 148%;
            width: 100%;
            position: absolute;
            left: 0px;
            top: 0px;
            z-index: 999;
            background: #5857574d;
        }
    </style>

    <style>
        .tooltip {
            position: relative;
            display: inline-block;
            border-bottom: 1px dotted black;
        }

            .tooltip .tooltiptext {
                visibility: hidden;
                width: 120px;
                background-color: #555;
                color: #fff;
                text-align: center;
                border-radius: 6px;
                padding: 5px 0;
                position: absolute;
                z-index: 1;
                bottom: 125%;
                left: 50%;
                margin-left: -60px;
                opacity: 0;
                transition: opacity 0.3s;
            }

                .tooltip .tooltiptext::after {
                    content: "";
                    position: absolute;
                    top: 100%;
                    left: 50%;
                    margin-left: -5px;
                    border-width: 5px;
                    border-style: solid;
                    border-color: #555 transparent transparent transparent;
                }

            .tooltip:hover .tooltiptext {
                visibility: visible;
                opacity: 1;
            }
    </style>

    <style>
        #Question:hover {
            cursor: pointer;
        }
    </style>
    <style>
        button.btn.btn-primary.view {
            margin-top: 10px;
        }
    </style>*@
    <link href="~/CSS/jquery-ui.css" rel="stylesheet" />
    <link href="~/Css/BootNew.css" rel="stylesheet" />
    <link href="~/Css/ChatPopup.css" rel="stylesheet" />
    <link href="~/Css/BlinkingRed.css" rel="stylesheet" />
    <link href="~/Css/loading.css" rel="stylesheet" />
</head>



<body>

    <div id="cover" style="display:none"></div>

    <pre style="visibility: hidden"></pre>
    <script src="~/JS/jquery-1.10.0.min.js"></script>
    <script src="~/JS/jquery-ui.min.js"></script>
    <script src="~/Js/jquery.floatThead.js"></script>

    <script src="~/Scripts/angular.min.js"></script>
    <script src="~/Js/Angularjs/MyApp.js"></script>
    <script src="~/Js/Angularjs/MyServices.js"></script>
    <script src="~/Js/Angularjs/HomeCtrl.js?v.1.1.0"></script>
    @*AutoComplet Branch*@
    @*<script type="text/javascript">
            $(function () {
                $("#txtATMID").autocomplete({
                    source: function (request, response) {
                        $.ajax({
                            url: '@Url.Action("AutoComplete")',
                            data: "{ 'prefix': '" + request.term + "'}",
                            dataType: "json",
                            type: "POST",
                            contentType: "application/json; charset=utf-8",
                            success: function (data) {
                                response($.map(data, function (item) {
                                    return { label: item.ATMId, value: item.ATMId, id: item.ATMId }
                                }))
                            },
                            error: function (response) {
                                alert(response.responseText);
                            },
                            failure: function (response) {
                                alert(response.responseText);
                            }
                        });
                    },
                    minLength: 3,
                });
            });
        </script>*@
    <div class="container-fluid" ng-app="myApp">
        <section ng-controller="HomeCtrl">
            <div class="row">
                <div class="col-sm-2">
                    <label for="uAtmId">ATM Id</label>
                    <input type="text" id="txtATMID" ng-keyup="SearchAtm_OnChange()" class="form-control" placeholder="ATM Id" ng-model="txtATMID" />
                </div>
                <div class="col-sm-2">
                    <label for="uFromDate">From Date</label>
                    <input type="date" id="txtFromDate" name="txtFromDate" class="form-control" ng-model="txtFromDate" />
                </div>
                <div class="col-sm-2">
                    <label for="uToDate">To Date</label>
                    <input type="date" id="txtToDate" name="txtToDate" class="form-control" ng-model="txtToDate" />
                </div>
                <div class="col-sm-1">
                    <label for="uSearch">&nbsp;</label>
                    <button id="btnSearch" type="button" class="btn btn-primary btn-block" ng-click="btnSearch_Click(txtATMID,txtFromDate,txtToDate)">Search</button>
                </div>
                <div class="col-sm-1">
                    <label for="uotc">&nbsp;</label>
                    <button type="button" id="btnSCOOTCGenerate" class="btn btn-danger btn-block" ng-click="btnSCOOTCGenerate_Click()">
                        <i class="fa fa-unlock-alt" aria-hidden="true"></i> OTC
                    </button>
                </div>
                <div class="col-sm-2">
                    <label for="uCount">FLM Hours</label>
                    <input type="text" class="form-control" placeholder="FLM Hours" id="Duration" ng-model="flmSite.SiteAccessTime"
                           readonly="true" style="color:red;font-weight:bold;text-align:center;background-color:#FFD700" />
                </div>
                <div class="col-sm-2">
                    <label for="uCount">Operational Hours</label>
                    <input type="text" class="form-control" placeholder="Operation Hours" id="Operation" ng-model="flmSite.OperationAccessTime"
                           readonly="true" style="color:White;font-weight:bold;text-align:center;background-color:#d82c2c" />
                </div>
            </div>
            <div class="row">
                <div class="col-md-12" style=" border: 1px solid gray; margin-top: 10px; margin-bottom: 10px; padding: 5px;">
                    <b style="font-size:10.5px">SCO Details</b> ||
                    <span style="font-weight:bold"> ATMId :- {{routeStatus.AtmId}} </span> ||
                    <span style="font-weight:bold"> RouteNo :- {{routeStatus.RouteNo}}</span> ||
                    <span style="font-weight:bold"> Status :- {{routeStatus.Status}}</span> ||
                    <span style="font-weight:bold; background-color:yellow;" ng-class="{'blink_me':routeStatus.timefromCurrent<15, 'text-success':routeStatus.timefromCurrent>=15}"> LastOtcTaken :- {{routeStatus.LastOtcTaken}}</span>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12" style="padding-left:0;padding-right:0;">
                    <div style="height: 220px; overflow-x: auto;">
                        <table id="myDatatable" class="table table-striped table-bordered" style="font-family: Calibri; font-size: 10.5px;">
                            <thead>
                                <tr class="bg " style="background-color: #337ab7; color: white">
                                    <th>Date</th>
                                    <th>Region</th>
                                    <th>Branch</th>
                                    @*<th>City</th>*@
                                    <th>Msp</th>
                                    <th>Bank</th>
                                    <th>ATM ID</th>
                                    <th>RouteNo</th>
                                    <th>Activity</th>
                                    <th>Status</th>
                                    <th>Key Holder Name</th>
                                    <th>Key Holder Reg No</th>
                                    <th>Key Holder Mobile</th>
                                    <th>Combo Holder Name</th>
                                    <th>Combo Holder Reg No</th>
                                    <th>Combo Holder Mobile</th>
                                    <th style="width: 90px">Route Key Name</th>
                                    <th style="width: 90px">Combination No</th>
                                    <th style="width: 90px">Ques.</th>
                                    <th style="width: 90px">Action</th>
                                    <th style="width: 90px">Remarks One</th>
                                    <th style="width: 90px">Remarks Two</th>
                                    <th>Time Block</th>
                                    <th>Lock Status</th>
                                    <th>Actual Time</th>
                                    <th>User Name</th>
                                    <th>Indent Uploaded</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="font-weight: bold;" ng-repeat="sco in scolist" ng-class="{'lblsuccess':sco.TypeFlag=='RMS'}">
                                    <td>{{sco.Date|date:'yyyy-MM-dd'}}</td>
                                    <td>{{sco.REGION}}</td>
                                    <td>{{sco.BRANCH}}</td>
                                    @*<td>{{sco.CITY}}</td>*@
                                    <td>{{sco.MSP}}</td>
                                    <td>{{sco.BANK}}</td>
                                    <td>{{sco.ATMId}}</td>
                                    <td ng-disabled="sco.TypeFlag=='RMS'" data-toggle="modal" data-target="#myModalLast" ng-click="GetLastThreeOtcDetails(sco.Date,sco.BRANCH,sco.Route)"
                                        style="cursor:pointer;text-decoration: underline;color: blue;">
                                        {{sco.Route}}
                                    </td>
                                    <td>{{sco.Activity}}</td>
                                    <td>{{sco.Status}}</td>
                                    <td>{{sco.Custodian1Name}}</td>
                                    <td>{{sco.Custodian1RegNo}}</td>
                                    <td>{{sco.Custodian1Mobile}}</td>
                                    <td>{{sco.Custodian2Name}}</td>
                                    <td>{{sco.Custodian2RegNo}}</td>
                                    <td>{{sco.Custodian2Mobile}}</td>
                                    <td>
                                        <input type="text" id="routekeyname" ng-disabled="sco.TypeFlag=='RMS'" ng-model="sco.RouteKeyName" ng-keyup="TakeRouteKeyName()"
                                               class="form-control routekeyname"
                                               placeholder="Route Key Name" style="background-color:#ecb7f4;width:100px;" ng-focus="getIndexNo($index)" />
                                    </td>
                                    <td>
                                        <input type="text" id="txtCombinationNoSco" ng-disabled="sco.TypeFlag=='RMS'" ng-model="sco.CombinationNo" class="form-control CombinationNo" placeholder="Combination No "
                                               style="background-color:#ecb7f4;width:100px;" />
                                    </td>
                                    <td>
                                        <button type="button" ng-disabled="sco.TypeFlag=='RMS'" ng-click="GetSCORandomQuestion(sco)"
                                                class="btn btn-primary" data-toggle="modal" data-target=".ForQuestion">
                                            <i class="fa fa-question" style="color:white"></i>
                                        </button>
                                    </td>
                                    <td>
                                        <button type="button" ng-disabled="sco.TypeFlag=='RMS'" class="btn btn-primary"
                                                ng-click="SaveScoDetails_Click(sco,$index)">
                                            Save
                                        </button>
                                    </td>
                                    <td>
                                        <input type="text" id="txtRemarksOneSco" ng-disabled="sco.TypeFlag=='RMS'" ng-model="sco.RemarksOne"
                                               class="form-control RemarksOne" placeholder="Remarks One" title="{{sco.RemarksOne}}"
                                               style="background-color:#ecb7f4;width:100px;" />
                                    </td>
                                    <td>
                                        <input type="text" id="txtRemarksTwoSco" ng-disabled="sco.TypeFlag=='RMS'" ng-model="sco.RemarksTwo"
                                               class="form-control RemarksTwo" placeholder="Remarks Two" title="{{sco.RemarksTwo}}"
                                               style="background-color:#ecb7f4;width:100px;" />
                                    </td>
                                    <td>
                                        <select class="form-control" ng-disabled="sco.TypeFlag=='RMS'" ng-model="sco.ddlScoTimeBlock"
                                                style="background-color:#ecb7f4;width:80px;">
                                            <option value="4">4</option>
                                            <option value="8">8</option>
                                            <option value="12">12</option>
                                            <option value="24">24</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select class="form-control ddlScoLockStatus" ng-disabled="sco.TypeFlag=='RMS'" ng-model="sco.ddlScoLockStatus"
                                                style="background-color:#ecb7f4;width:80px;">
                                            <option value="0">0</option>
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                        </select>
                                    </td>

                                    <td>{{sco.ActualTime}}</td>
                                    <td>{{sco.UserName}}</td>
                                    <td>{{sco.Indent_Uploaded}}</td>
                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            @*Audit OTC Intergration*@
            <div class="row">
                <p></p>
                <pre><b style="font-size:10.5px">Audit Details</b></pre>
                <div class="col-md-12" style="padding-left:0;padding-right:0;">
                    <div style="height: 220px; overflow-x: auto;">
                        <table id="myDatatable" class="table table-striped table-bordered" style="font-family: Calibri; font-size: 10.5px;">
                            <thead>
                                <tr class="bg " style="background-color: #337ab7; color: white">
                                    <th>Date</th>
                                    <th>Region</th>
                                    <th>Branch</th>
                                    @*<th>City</th>*@
                                    <th>Msp</th>
                                    <th>Bank</th>
                                    <th>ATM ID</th>
                                    <th>RouteNo</th>
                                    <th>Activity</th>
                                    <th>Status</th>
                                    <th>Key Holder Name</th>
                                    <th>Key Holder Reg No</th>
                                    <th>Key Holder Mobile</th>
                                    <th>Combo Holder Name</th>
                                    <th>Combo Holder Reg No</th>
                                    <th>Combo Holder Mobile</th>
                                    <th style="width: 90px">Route Key Name</th>
                                    <th style="width: 90px">Combination No</th>
                                    <th style="width: 90px">Ques.</th>
                                    <th style="width: 90px">Action</th>
                                    <th style="width: 90px">Remarks One</th>
                                    <th style="width: 90px">Remarks Two</th>
                                    <th>Time Block</th>
                                    <th>Lock Status</th>
                                    <th>Actual Time</th>
                                    <th>User Name</th>
                                    <th>Auditor Name</th>
                                    <th>Auditor Reg No</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="font-weight: bold;" ng-repeat="audit in AuditDtls" ng-class="{'lblsuccess':audit.TypeFlag=='RMS'}">
                                    <td>{{audit.Date|date:'yyyy-MM-dd'}}</td>
                                    <td>{{audit.REGION}}</td>
                                    <td>{{audit.BRANCH}}</td>
                                    @*<td>{{audit.CITY}}</td>*@
                                    <td>{{audit.MSP}}</td>
                                    <td>{{audit.BANK}}</td>
                                    <td>{{audit.ATMId}}</td>
                                    <td ng-disabled="audit.TypeFlag=='RMS'" data-toggle="modal" data-target="#myModalLast" ng-click="GetLastThreeAuditOtcDetails(audit.Date,audit.BRANCH,audit.Route)"
                                        style="cursor:pointer;text-decoration: underline;color: blue;">
                                        {{audit.Route}}
                                    </td>
                                    <td>{{audit.Activity}}</td>
                                    <td>{{audit.Status}}</td>
                                    <td>{{audit.Custodian1Name}}</td>
                                    <td>{{audit.Custodian1RegNo}}</td>
                                    <td>{{audit.Custodian1Mobile}}</td>
                                    <td>{{audit.Custodian2Name}}</td>
                                    <td>{{audit.Custodian2RegNo}}</td>
                                    <td>{{audit.Custodian2Mobile}}</td>
                                    <td>
                                        <input type="text" id="routekeyname" ng-disabled="audit.TypeFlag=='RMS'" ng-model="audit.RouteKeyName" ng-keyup="TakeRouteKeyName()"
                                               class="form-control routekeyname"
                                               placeholder="Route Key Name" style="background-color:#ecb7f4;width:100px;" ng-focus="getIndexNo($index)" />
                                    </td>
                                    <td>
                                        <input type="text" id="txtCombinationNoSco" ng-disabled="audit.TypeFlag=='RMS'" ng-model="audit.CombinationNo" class="form-control CombinationNo" placeholder="Combination No "
                                               style="background-color:#ecb7f4;width:100px;" />
                                    </td>
                                    <td>
                                        <button type="button" ng-disabled="audit.TypeFlag=='RMS'" ng-click="GetAuditSCORandomQuestion(audit)"
                                                class="btn btn-primary" data-toggle="modal" data-target=".ForAuditQuestion">
                                            <i class="fa fa-question" style="color:white"></i>
                                        </button>
                                    </td>
                                    <td>
                                        <button type="button" ng-disabled="audit.TypeFlag=='RMS'" class="btn btn-primary"
                                                ng-click="SaveAuditScoDetails_Click(audit,$index)">
                                            Save
                                        </button>
                                    </td>
                                    <td>
                                        <input type="text" id="txtRemarksOneSco" ng-disabled="audit.TypeFlag=='RMS'" ng-model="audit.RemarksOne"
                                               class="form-control RemarksOne" placeholder="Remarks One" title="{{audit.RemarksOne}}"
                                               style="background-color:#ecb7f4;width:100px;" />
                                    </td>
                                    <td>
                                        <input type="text" id="txtRemarksTwoSco" ng-disabled="sco.TypeFlag=='RMS'" ng-model="audit.RemarksTwo"
                                               class="form-control RemarksTwo" placeholder="Remarks Two" title="{{audit.RemarksTwo}}"
                                               style="background-color:#ecb7f4;width:100px;" />
                                    </td>
                                    <td>
                                        <select class="form-control" ng-disabled="audit.TypeFlag=='RMS'" ng-model="audit.ddlScoTimeBlock"
                                                style="background-color:#ecb7f4;width:80px;">
                                            <option value="4">4</option>
                                            <option value="8">8</option>
                                            <option value="12">12</option>
                                            <option value="24">24</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select class="form-control ddlScoLockStatus" ng-disabled="audit.TypeFlag=='RMS'" ng-model="audit.ddlScoLockStatus"
                                                style="background-color:#ecb7f4;width:80px;">
                                            <option value="0">0</option>
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                        </select>
                                    </td>

                                    <td>{{audit.ActualTime}}</td>
                                    <td>{{audit.UserName}}</td>
                                    <td>{{audit.Auditor}}</td>
                                    <td>{{audit.AuditorId}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="row">
                <p></p>
                <pre><b style="font-size:10.5px">FLM Details</b></pre>
                <div class="col-md-12" style="padding-left:0;padding-right:0;">
                    <div style="height: 220px; overflow-x: auto;">

                        <table id="myDatatableFLM" class="table table-striped table-bordered " style="font-family: Calibri; font-size: 10.5px;">
                            <thead>
                                <tr class="bg" style="background-color: #337ab7; color: white">
                                    <th>ATM ID</th>
                                    <th>Date</th>
                                    <th>Docket No</th>
                                    <th>Route No.</th>
                                    <th>Activity</th>
                                    <th>OpenClose</th>
                                    <th>FLM Remarks</th>
                                    <th style="width: 100px; display: none">Type</th>
                                    <th style="width: 100px">Caller Number</th>
                                    <th style="width: 100px">Route Key Name</th>
                                    <th style="width: 100px">Combination No</th>
                                    <th style="width: 100px">Remarks One</th>
                                    <th style="width: 100px">Remarks Two</th>
                                    <th style="width: 100px">Ques.</th>
                                    <th style="width: 100px">Action</th>
                                    <th>Actual Time</th>
                                    <th>User Name</th>
                                    <th>Time Block</th>
                                    <th>Lock Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-show="lstFlms.length>0" style="font-weight: bold;" ng-repeat="flm in lstFlms" ng-class="{'lblsuccess':flm.TypeFlag=='RMSFLM'}">
                                    <td>{{flm.FlMATMId}}</td>
                                    <td>{{flm.OPENDATE}}</td>
                                    <td>{{flm.DocketNo}}</td>
                                    <td>
                                        <a ng-disabled="flm.OpenClose=='CLOSE' ||  flm.TypeFlag=='RMSFLM'" href="#" data-toggle="modal" data-target="#myModalLast"
                                           ng-click="GetLastThreeFLMOtcDetails(flm.OPENDATE,flm.Branch,flm.Route_Id)"
                                           style="cursor:pointer;text-decoration: underline;color: blue;">{{flm.Route_Id}}</a>

                                    </td>
                                    <td>{{flm.Remarks}}</td>
                                    <td>{{flm.OpenClose}}</td>
                                    <td>
                                        <input type="text" id="txtType1" class="form-control FlmRemarks" ng-model="flm.FlmRemarks"
                                               title="{{flm.FlmRemarks}}" ng-disabled="true" style="width:150px;" />
                                    </td>
                                    <td>
                                        <input type="text" ng-disabled="flm.OpenClose=='CLOSE' || flm.TypeFlag=='RMSFLM'"
                                               class="form-control FlmCallerNumber" maxlength="10" ng-model="flm.FLMCallerNumber"
                                               onkeypress="return IsNumeric(event);" placeholder="Caller Number"
                                               style="background-color:#ecb7f4;width:100px;" />
                                    </td>
                                    <td>
                                        <input type="text" ng-disabled="flm.OpenClose=='CLOSE' || flm.TypeFlag=='RMSFLM'" ng-model="flm.FLMRouteKeyName"
                                               ng-keyup="TakeRouteKeyNameFLM()"
                                               id="txtRouteKeyNameFlm2" class="form-control FLMRouteKeyName" placeholder="Route Key Name"
                                               style="background-color:#ecb7f4;width:100px;" />
                                    </td>
                                    <td>
                                        <input type="text" ng-disabled="flm.OpenClose=='CLOSE' || flm.TypeFlag=='RMSFLM'" id="txtCombinationNoFlm2"
                                               ng-model="flm.FLMCombinationNo"
                                               class="form-control"
                                               placeholder="Combination No" style="background-color:#ecb7f4;width:100px;" />
                                    </td>
                                    <td>
                                        <input type="text" ng-disabled="flm.OpenClose=='CLOSE' || flm.TypeFlag=='RMSFLM'"
                                               ng-model="flm.FLMRemarksOne" id="txtRemarksOneFlm2" class="form-control FlmRemarksOne" placeholder="Remarks One"
                                               style="background-color:#ecb7f4;width:100px;" title="{{flm.FLMRemarksOne}}" />
                                    </td>
                                    <td>
                                        <input type="text" ng-disabled="flm.OpenClose=='CLOSE' || flm.TypeFlag=='RMSFLM'"
                                               ng-model="flm.FLMRemarksTwo" id="txtRemarksTwoFlm2" class="form-control FlmRemarksTwo"
                                               placeholder="Remarks Two" style="background-color:#ecb7f4;width:100px;" title="{{flm.FLMRemarksTwo}}" />
                                    </td>
                                    <td>
                                        <button type="button" ng-disabled="flm.OpenClose=='CLOSE' || flm.TypeFlag=='RMSFLM'"
                                                class="btn btn-primary" data-toggle="modal" data-target=".ForFLMQuestion" ng-click="getFlmPopUp(flm)">
                                            <i class="fa fa-question" style="color:white"></i>
                                        </button>
                                    </td>
                                    <td>
                                        <button type="button" ng-disabled="flm.OpenClose=='CLOSE' || flm.TypeFlag=='RMSFLM'" ng-click="FlmSaveClick(flm,$index)"
                                                class="btn btn-primary FlmClick">
                                            Save
                                        </button>
                                    </td>
                                    <td>{{flm.ActualTime}}</td>
                                    <td>{{flm.UserName}}</td>
                                    <td>
                                        <select class="form-control" ng-disabled="flm.OpenClose=='CLOSE' || flm.TypeFlag=='RMSFLM'"
                                                ng-model="flm.ddlFlmTimeBlock" style="background-color:#ecb7f4;width:80px;">
                                            <option value="4">4</option>
                                            <option value="8">8</option>
                                            <option value="12">12</option>
                                            <option value="24">24</option>
                                        </select>
                                    </td>
                                    <td>
                                        <select class="form-control" ng-disabled="flm.OpenClose=='CLOSE' || flm.TypeFlag=='RMSFLM'"
                                                ng-model="flm.ddlFlmLockStatus" style="background-color:#ecb7f4;width:80px;">
                                            <option value="0">0</option>
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                        </select>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12" style="padding-left:0;padding-right:0;">
                    <p></p>
                    <div class="container" style="width: 100%;">
                        <div class="row" style="display: block; padding: 5.5px; margin-bottom: 5px; font-size: 13px; line-height: 1.42857143; color: #333; word-break: break-all; word-wrap: break-word; background-color: #f5f5f5; border: 1px solid #ccc; border-radius: 4px;">
                            <div class="col-sm-10" style="font-family: Menlo,Monaco,Consolas; font-size: 15px;"><b>OTC Details</b></div>
                            <div class="col-sm-2">
                                <button class="btn btn-warning btn-xs add-user .navbar-right btn-block" id="AddOther" data-toggle="modal" data-target="#myModal" title="Click Me To Add OTC Details"
                                        ng-click="AddOTCDetails()">
                                    Add OTC Details &nbsp;&nbsp;&nbsp;<i class="fa fa-user-plus" style="font-size: 15px" id="AddUser"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div style="height: 220px; overflow-x: auto;">
                        <table id="myDatatableOTC" class="table table-striped table-bordered" style="font-family: Calibri; font-size: 10.5px;">
                            <thead>
                                <tr class="bg " style="background-color: #337ab7; color: white">
                                    <th>Type</th>
                                    <th>CallerNumber</th>
                                    <th>Date</th>
                                    <th>Route Key Name</th>
                                    <th>Combination  No</th>
                                    <th>Remarks-1</th>
                                    <th>Remarks-2</th>
                                    <th>Combination Issued By</th>
                                    <th>Combination Issued Time</th>
                                    <th>ATM ID</th>
                                    <th>Time Block</th>
                                    <th>Lock Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="othrms in lstOtherRms" ng-class="{'lblsuccess':othrms.TypeFlag=='OtherRMS'}">
                                    <td>{{othrms.OtherActivity}}</td>
                                    <td>{{othrms.OtherCallerNumber}}</td>
                                    <td>{{othrms.OtherDate}}</td>
                                    <td>{{othrms.OtherRouteKeyName}}</td>
                                    <td>{{othrms.OtherCombinationNo}}</td>
                                    <td>{{othrms.OtherRemarksOne}}</td>
                                    <td>{{othrms.OtherRemarksTwo}}</td>
                                    <td>{{othrms.OtherCombinationIssuedBy}}</td>
                                    <td>{{othrms.OtherCombinationIssuedTime}}</td>
                                    <td>{{othrms.OtherATMID}}</td>
                                    <td>
                                        4
                                        @*<select class="form-control" ng-model="othrms.OtherTimeBlock" style="background-color:#ecb7f4;width:80px;">
                                        <option value="4">4</option>
                                        <option value="8">8</option>
                                        <option value="12">12</option>
                                        <option value="24">24</option>
                                    </select>*@
                                    </td>
                                    <td>
                                        0
                                        @*<select class="form-control" ng-model="othrms.OtherBlockStatus" style="background-color:#ecb7f4;width:80px;">
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                    </select>*@
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- The Modal -->
            <div class="modal fade" id="myModal" data-backdrop="static">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 id="header">OTC Provided Manual Details</h4>
                            <input type="hidden" id="txtRecID" />
                        </div>
                        <!-- Modal body -->
                        <div class="modal-body">
                            <div class="row">
                                <div class="col-sm-3">
                                    <label for="uType">Date</label>
                                    <input type="date" id="txtDate" class="form-control" ng-model="manual.txtDate" readonly="true" />
                                </div>
                                <div class="col-sm-3">
                                    <label for="uType">Activity</label>
                                    <select class="form-control" id="ddlActivity" ng-model="manual.ddlActivity">
                                        <option value="">Select</option>
                                        <option value="Cash Loading">Cash Loading</option>
                                        <option value="Cash Dumping">Cash Dumping</option>
                                        <option value="EOD">EOD</option>
                                        <option value="FLM">FLM</option>
                                        <option value="SLM">SLM</option>
                                        <option value="Fake Closer FLM Visit">Fake Closer FLM Visit</option>
                                        <option value="Internal Audit">Internal Audit</option>
                                        <option value="Bank Audit">Bank Audit</option>
                                        <option value="MSP Audit">MSP Audit</option>
                                        <option value="Operational Audit">Operational Audit</option>
                                        <option value="Preventive Maintenance">Preventive Maintenance</option>
                                        <option value="Part Replacement">Part Replacement</option>
                                        <option value="Activation">Activation</option>
                                        <option value="Deactivation">Deactivation</option>
                                        <option value="Key Testing/Calender">Key Testing/Calender</option>
                                        <option value="Cash Divert">Cash Divert</option>
                                        <option value="Cash Removal">Cash Removal</option>
                                        <option value="Route Rotation">Route Rotation</option>
                                    </select>
                                </div>
                                <div class="col-sm-3">
                                    <label for="uType">ATM ID</label>
                                    <input type="text" id="txtManualATMID" ng-model="manual.txtManualATMID" ng-keyup="SearchAtmManual_OnChange()"
                                           class="form-control" placeholder="ATM ID" autocomplete="off" />
                                </div>
                                <div class="col-sm-3">
                                    <label for="uType">Caller Number</label>
                                    <input type="text" id="txtCallerNumber" ng-model="manual.txtCallerNumber" class="form-control"
                                           placeholder="Caller Number" autocomplete="off" onkeypress="return IsNumeric(event);" maxlength="10" />
                                </div>
                            </div>
                            <p></p>
                            <div class="row">
                                <div class="col-sm-4">
                                    <label for="uRouteKeyName">Route Key Name</label>
                                    <input type="text" id="txtRouteKeyName" ng-keyup="TakeRouteKeyNameManual()"
                                           ng-model="manual.txtRouteKeyName" class="form-control ManualRouteKeyName" placeholder="RouteKey Name" autocomplete="off" />
                                </div>
                                <div class="col-sm-2">
                                    <label for="uRouteKeyName" style="visibility:hidden;">Route Key Name</label>
                                    <button type="button" id="btnGenerate" class="btn btn-danger" ng-click="GenerateManualOTC(manual)">
                                        <i class="fa fa-unlock-alt" aria-hidden="true"></i> Generate OTC
                                    </button>
                                </div>
                                <div class="col-sm-6">
                                    <label for="uCombinationNo">Combination  No</label>
                                    <input type="text" id="txtCombinationNo" ng-model="manual.txtCombinationNo"
                                           class="form-control" placeholder="Combination No" autocomplete="off" />
                                </div>
                            </div>
                            <p></p>
                            <div class="row">
                                <div class="col-sm-6">
                                    <label for="uRemarks1">Remarks 1</label>
                                    <textarea class="form-control" name="message" rows="5" cols="10" id="txtRemarks1"
                                              ng-model="manual.txtRemarks1" placeholder="Remarks One"></textarea>
                                </div>
                                <div class="col-sm-6">
                                    <label for="uRemarks2">Remarks 2</label>
                                    <textarea class="form-control" name="message" rows="5" cols="10"
                                              id="txtRemarks2" ng-model="manual.txtRemarks2" placeholder="Remarks Two"></textarea>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-6">
                                    <label for="uTimeBlock">Time Block</label>
                                    <select class="form-control" id="ddlOtherTimeBlock" ng-model="manual.ddlTimeBlock">
                                        <option value="4">4</option>
                                        <option value="8">8</option>
                                        <option value="12">12</option>
                                        <option value="24">24</option>
                                    </select>
                                </div>
                                <div class="col-sm-6">
                                    <label for="uLockStatus">Lock Status</label>
                                    <select class="form-control" id="ddlOtherLockStatus" ng-model="manual.ddlLockStatus">
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                    </select>
                                </div>

                            </div>
                        </div>
                        <!-- Modal footer -->
                        <div class="modal-footer">
                            <button type="button" id="btnSaveManualDetails" class="btn btn-primary"
                                    ng-click="btnSaveManualDetails_click(manual)">
                                Save
                            </button>
                            <button type="button" id="btnclose" class="btn btn-warning" data-dismiss="modal">Close</button>
                            <button type="reset" id="btnReset" class="btn btn-secondary" style="display: none;">Reset</button>
                        </div>
                    </div>
                </div>
            </div>

            @*SCO Custodian MOdal  *@
            <center>
                <div class="modal fade ForQuestion" data-backdrop="static" style="margin-top:7%" id="ForQuestion" role="dialog">
                    <div class="modal-dialog modal-lg">

                        <!-- Modal content-->
                        <div class="modal-content" style="width:120%;margin-left:-8%">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title"><center>Random Questionnaire</center></h4>
                            </div>
                            <div class="modal-body">
                                <center>
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-sm-10">
                                                <table class="table table-responsive" id="myDataTable">
                                                    <tr>
                                                        <td style="border-left:1px solid black">ATM Id :- </td>
                                                        <td style="border-right:1px solid black" id="txtQuestionATM">{{randQuestion.txtQuestionATM}}</td>
                                                        <td>Route Number :- </td>
                                                        <td style="border-right:1px solid black" id="txtQuestionRouteNo">{{randQuestion.txtQuestionRouteNo}}</td>
                                                        <td>Date :- </td>
                                                        <td style="border-right:1px solid black" id="txtQuestionDate">{{randQuestion.txtQuestionDate}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-5" style="border-right:1px solid black">
                                                <table class="table table-responsive" id="myDataTable01">
                                                    <tr>
                                                        <td style="width: 35%">Custiodian One :-</td>
                                                        <td id="txtQuestionCustiodianOneId">{{randQuestion.txtQuestionCustiodianOneId}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width: 35%">Name :-</td>
                                                        <td id="txtQuestionCustiodianOneName">{{randQuestion.txtQuestionCustiodianOneName}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label for="QuestionOne" class="btn btn-primary">
                                                                <input type="checkbox" id="QuestionOne" ng-model="randQuestion.QuestionOne" />
                                                            </label> Q One :-
                                                        </td>
                                                        <td id="txtQuestionCustiodianOneQ1">{{randQuestion.CustodianOneQ1}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label for="QuestionTwo" class="btn btn-primary">
                                                                <input type="checkbox" id="QuestionTwo" ng-model="randQuestion.QuestionTwo" />
                                                            </label> Q Two :-
                                                        </td>
                                                        <td id="txtQuestionCustiodianOneQ2">{{randQuestion.CustodianOneQ2}}</td>
                                                    </tr>
                                                </table>

                                            </div>
                                            <div class="col-sm-5">
                                                <table class="table table-responsive">
                                                    <tr>
                                                        <td style="width: 35%">Custiodian Two :-</td>
                                                        <td id="txtQuestionCustiodianTwoId">{{randQuestion.txtQuestionCustiodianTwoId}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width: 35%">Name :-</td>
                                                        <td id="txtQuestionCustiodianTwoName">{{randQuestion.txtQuestionCustiodianTwoName}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label for="QuestionThree" class="btn btn-primary">
                                                                <input type="checkbox" id="QuestionThree" ng-model="randQuestion.QuestionThree" />
                                                            </label> Q One :-
                                                        </td>
                                                        <td id="txtQuestionCustiodianOneQ3">{{randQuestion.CustodianTwoQ1}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label for="QuestionFour" class="btn btn-primary">
                                                                <input type="checkbox" id="QuestionFour" ng-model="randQuestion.QuestionFour" />
                                                            </label> Q Two :-
                                                        </td>
                                                        <td id="txtQuestionCustiodianOneQ4">{{randQuestion.CustodianTwoQ2}}</td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>

                                    </div>
                                </center>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary" id="btnQuestionSave" ng-click="btnQuestionSave_Click()">Submit</button>
                                <button type="button" class="btn btn-default" data-dismiss="modal" id="btnQuestionClose">Close</button>
                            </div>
                        </div>

                    </div>
                </div>
            </center>

            @*Audit Custodian and Auditot Question details*@
            <center>
                <div class="modal fade ForAuditQuestion" data-backdrop="static" style="margin-top:7%" id="ForAuditQuestion" role="dialog">
                    <div class="modal-dialog modal-lg">

                        <!-- Modal content-->
                        <div class="modal-content" style="width:145%;margin-left:-22%">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title"><center>Audit Random Questionnaire</center></h4>
                            </div>
                            <div class="modal-body">
                                <center>
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-sm-10">
                                                <table class="table table-responsive" id="myDataTable">
                                                    <tr>
                                                        <td style="border-left:1px solid black">ATM Id :- </td>
                                                        <td style="border-right:1px solid black" id="txtAuditQuestionATM">{{randQuestionAudit.txtAuditQuestionATM}}</td>
                                                        <td>Route Number :- </td>
                                                        <td style="border-right:1px solid black" id="txtAuditQuestionRouteNo">{{randQuestionAudit.txtAuditQuestionRouteNo}}</td>
                                                        <td>Date :- </td>
                                                        <td style="border-right:1px solid black" id="txtAuditQuestionDate">{{randQuestionAudit.txtAuditQuestionDate}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-4" style="border-right:1px solid black">
                                                <table class="table table-responsive" id="myDataTable01">
                                                    <tr>
                                                        <td style="width: 35%">Custiodian One :-</td>
                                                        <td id="txtAuditQuestionCustiodianOneId">{{randQuestionAudit.txtAuditQuestionCustiodianOneId}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width: 35%">Name :-</td>
                                                        <td id="txtAuditQuestionCustiodianOneName">{{randQuestionAudit.txtAuditQuestionCustiodianOneName}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label for="QuestionOne" class="btn btn-primary">
                                                                <input type="checkbox" id="QuestionOneAudit" ng-model="randQuestionAudit.CustodianOneQ1" />
                                                            </label> Q One :-
                                                        </td>
                                                        <td id="txtQuestionCustiodianOneQ1Audit">{{randQuestionAudit.CustodianOneQ1}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label for="QuestionTwo" class="btn btn-primary">
                                                                <input type="checkbox" id="QuestionTwoAudit" ng-model="randQuestionAudit.CustodianOneQ2" />
                                                            </label> Q Two :-
                                                        </td>
                                                        <td id="txtQuestionCustiodianOneQ2Audit">{{randQuestionAudit.CustodianOneQ2}}</td>
                                                    </tr>
                                                </table>

                                            </div>
                                            <div class="col-sm-4">
                                                <table class="table table-responsive">
                                                    <tr>
                                                        <td style="width: 35%">Custiodian Two :-</td>
                                                        <td id="txtAuditQuestionCustiodianTwoId">{{randQuestionAudit.txtAuditQuestionCustiodianTwoId}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width: 35%">Name :-</td>
                                                        <td id="txtAuditQuestionCustiodianTwoName">{{randQuestionAudit.txtAuditQuestionCustiodianTwoName}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label for="QuestionThree" class="btn btn-primary">
                                                                <input type="checkbox" id="QuestionThreeAudit" ng-model="randQuestionAudit.CustodianTwoQ1" />
                                                            </label> Q One :-
                                                        </td>
                                                        <td id="txtQuestionCustiodianOneQ3Audit">{{randQuestionAudit.CustodianTwoQ1}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label for="QuestionFour" class="btn btn-primary">
                                                                <input type="checkbox" id="QuestionFourAudit" ng-model="randQuestionAudit.CustodianTwoQ2" />
                                                            </label> Q Two :-
                                                        </td>
                                                        <td id="txtQuestionCustiodianOneQ4Audit">{{randQuestionAudit.CustodianTwoQ2}}</td>
                                                    </tr>
                                                </table>
                                            </div>

                                            <div class="col-sm-4">
                                                <table class="table table-responsive">
                                                    <tr>
                                                        <td style="width: 35%">Auditor :-</td>
                                                        <td id="txtAuditQuestionAuditorId">{{randQuestionAudit.txtAuditQuestionAuditorId}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width: 35%">Name :-</td>
                                                        <td id="txtAuditQuestionAuditor">{{randQuestionAudit.txtAuditQuestionAuditor}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label for="QuestionAudit" class="btn btn-primary">
                                                                <input type="checkbox" id="QuestionAudit" ng-model="randQuestion.QuestionAudit" />
                                                            </label> Q One :-
                                                        </td>
                                                        <td id="txtQuestionAuditorQ1">{{randQuestionAudit.AuditorQ1}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label for="QuestionAudit" class="btn btn-primary">
                                                                <input type="checkbox" id="QuestionAudit" ng-model="randQuestionAudit.QuestionAudit" />
                                                            </label> Q Two :-
                                                        </td>
                                                        <td id="txtQuestionAuditorQ2">{{randQuestionAudit.AuditorQ2}}</td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>

                                    </div>
                                </center>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary" id="btnQuestionSave" >Submit</button>
                                <button type="button" class="btn btn-default" data-dismiss="modal" id="btnQuestionClose">Close</button>
                            </div>
                        </div>

                    </div>
                </div>
            </center>
            @*FLM Custodian MOdal  *@
            <center>
                <div class="modal fade ForFLMQuestion" data-backdrop="static" style="margin-top:7%" id="ForFLMQuestion" role="dialog">
                    <div class="modal-dialog modal-lg">

                        <!-- Modal content-->
                        <div class="modal-content" style="width:120%;margin-left:-8%">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title"><center>Random Questionnaire</center></h4>
                            </div>
                            <div class="modal-body">
                                <center>
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-sm-10">
                                                <table class="table table-responsive" id="myFLMDataTable">
                                                    <tr>
                                                        <td style="border-left:1px solid black">ATM Id :- </td>
                                                        <td style="border-right:1px solid black" id="txtFLMQuestionATM">{{flmQ.txtFLMQuestionATM}}</td>
                                                        <td>Docket Number :- </td>
                                                        <td style="border-right:1px solid black" id="txtFLMQuestionDocket">{{flmQ.txtFLMQuestionDocket}}</td>
                                                        <td>Date :- </td>
                                                        <td style="border-right:1px solid black" id="txtFLMQuestionDate">{{flmQ.txtFLMQuestionDate}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                        <td></td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-5" style="border-right:1px solid black">
                                                <table class="table table-responsive" id="myFLMDataTable01">
                                                    <tr>
                                                        <td style="width: 35%">Custiodian One Phone :-</td>
                                                        <td>
                                                            <input type="text" id="txtFLMQuestionCustiodianOnePhone" ng-model="flmQ.CustodianOnePhone" class="form-control" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width: 35%">Custiodian One Id :-</td>
                                                        <td id="txtFLMQuestionCustiodianOneId">{{flmQ.CustodianOneId}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width: 35%">Name :-</td>
                                                        <td id="txtFLMQuestionCustiodianOneName">{{flmQ.CustodianOneName}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label for="FLMQuestionOne" class="btn btn-primary">
                                                                <input type="checkbox" id="FLMQuestionOne" ng-model="flmQ.FLMQuestionOne" />
                                                            </label> Q One :-
                                                        </td>
                                                        <td id="txtFLMQuestionCustiodianOneQ1">{{flmQ.CustodianOneQ1}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label for="FLMQuestionTwo" class="btn btn-primary">
                                                                <input type="checkbox" id="FLMQuestionTwo" ng-model="flmQ.FLMQuestionTwo" />
                                                            </label> Q Two :-
                                                        </td>
                                                        <td id="txtFLMQuestionCustiodianOneQ2">{{flmQ.CustodianOneQ2}}</td>
                                                    </tr>
                                                </table>

                                            </div>
                                            <div class="col-sm-5">
                                                <table class="table table-responsive">
                                                    <tr>
                                                        <td style="width: 35%">Custiodian Two Phone :-</td>
                                                        <td>
                                                            <input type="text" id="txtFLMQuestionCustiodianTwoPhone" ng-model="flmQ.CustodianTwoPhone" class="form-control" />
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width: 35%">Custiodian Two Id :-</td>
                                                        <td id="txtFLMQuestionCustiodianTwoId">{{flmQ.CustodianTwoId}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td style="width: 35%">Name :-</td>
                                                        <td id="txtFLMQuestionCustiodianTwoName">{{flmQ.CustodianTwoName}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label for="FLMQuestionThree" class="btn btn-primary">
                                                                <input type="checkbox" id="FLMQuestionThree" ng-model="flmQ.FLMQuestionThree" />
                                                            </label> Q One :-
                                                        </td>
                                                        <td id="txtFLMQuestionCustiodianOneQ3">{{flmQ.CustodianTwoQ1}}</td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            <label for="FLMQuestionFour" class="btn btn-primary">
                                                                <input type="checkbox" id="FLMQuestionFour" ng-model="flmQ.FLMQuestionFour" />
                                                            </label> Q Two :-
                                                        </td>
                                                        <td id="txtFLMQuestionCustiodianOneQ4">{{flmQ.CustodianTwoQ2}}</td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <div class="col-sm-1">
                                                <button class="btn btn-primary view" id="btnFlmSearch" ng-click="GetFLMRandomQuestion()"> View </button>
                                            </div>
                                        </div>

                                    </div>
                                </center>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary" id="btnFLMQuestionSave" ng-click="btnFLMQuestionSave_Click()">Submit</button>
                                <button type="button" class="btn btn-default" data-dismiss="modal" id="btnFLMQuestionClose">Close</button>
                            </div>
                        </div>

                    </div>
                </div>
            </center>

            @* last 3 otc on this route*@
            <div class="container">
                <div class="modal fade" id="myModalLast" role="dialog">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content" style="width: 1320px; left: -200px;">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title" id="ModalTitle">{{otc3Title}}</h4>
                            </div>
                            <div class="modal-body">
                                <table class="table table-striped table-bordered" id="myDatatableLastOtc">
                                    <thead>
                                        <tr class="bg" style="background-color: #337ab7; color: white; font-size: 11px;">
                                            <th>ATM ID</th>
                                            <th>Branch</th>
                                            <th>Route No</th>
                                            <th>Activity</th>
                                            <th>Crew1 Name</th>
                                            <th>Crew1 Regno</th>
                                            <th>Crew2 Name</th>
                                            <th>Crew2 Regno</th>
                                            <th>LastOTCTaken</th>
                                            <th>Caller Number</th>
                                            <th>Route Key Name</th>
                                            <th>Combination No</th>
                                            <th>Remark's One</th>
                                            <th>Remark's Two</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="otc3 in lstLast3Details" style="font-size:12px;" ng-show="lstLast3Details.length>0">
                                            <td>{{otc3.ATMID}}</td>
                                            <td>{{otc3.Branch}}</td>
                                            <td>{{otc3.RouteNo}}</td>
                                            <td>{{otc3.Activity}}</td>
                                            <td>{{otc3.Crew1Name}}</td>
                                            <td>{{otc3.Crew1Regno}}</td>
                                            <td>{{otc3.Crew2Name}}</td>
                                            <td>{{otc3.Crew2Regno}}</td>
                                            <td ng-class="{'text-danger':$index==0,  'text-warning':$index==1, 'text-success':$index==2}">{{otc3.LastOTCTaken}}</td>
                                            <td>{{otc3.CallerNumber}}</td>
                                            <td>{{otc3.RouteKeyName}}</td>
                                            <td>{{otc3.CombinationNo}}</td>
                                            <td>{{otc3.RemarksOne}}</td>
                                            <td>{{otc3.RemarksTwo}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            @* Image 1 *@
            @*<div>
            <img id="loading-image" ng-show="loader" src="~/Image/spinner.gif" style="position: absolute; left: 30%; top: 40%;">
        </div>*@
            <div ng-show="loader" id="divLoading"></div>
        </section>
    </div>


    @* Chat Window *@

    <div class="floating-chat">

        <i class="fa fa-comments fa-2x" aria-hidden="true"></i>
        <div class="chat">
            <div class="header">
                <span class="title">
                    Important Notice For The Day.
                </span>
                <button>
                    <i class="fa fa-times" aria-hidden="true"></i>
                </button>

            </div>
            <ul class="messages">
                <li class="self">Welcome @Session["UserName"] </li>
            </ul>
            @if (Session["UserType"].ToString() == "Admin")
            {
                <div class="footer">
                    <input type="text" class="text-box" contenteditable="true" disabled="true" id="textbox" />
                    <button id="sendMessage">send</button>
                    <button id="reset"><i class="fa fa-trash" onclick="reset()"></i></button>
                </div>
            }
            @if (Session["UserType"].ToString() != "Admin")
            {
                <div class="footer">
                    <div style="display:none" class="text-box" contenteditable="true" disabled="true"></div>
                </div>
            }
        </div>
    </div>

    @*<input type="text" style="display:none" id="MessageId" />
        <input type="text" style="display:none" id="txtCustodianOneId" />
        <input type="text" style="display:none" id="txtCustodianTwoId" />
        <input type="text" style="display:none" id="txtCustodianATMID" />
        <input type="text" style="display:none" id="txtCustodianRouteNo" />
        <input type="text" style="display:none" id="txtCustodianDate" />
        <input type="text" style="display:none" id="txtCustodianOneName" />
        <input type="text" style="display:none" id="txtCustodianTwoName" />
        <input type="text" style="display:none" id="txtClickCount" value="0" />
        <input type="text" style="display:none" id="txtItefolrot" />
        <input type="text" style="display:none" id="txtCustodianBranch" />
        <input type="text" style="display:none" id="txtCustodianOneMobile" />
        <input type="text" style="display:none" id="txtCustodianTwoMobile" />



        <input type="text" style="display:none" id="txtFLMATMId" />
        <input type="text" style="display:none" id="txtFLMDocketNumber" />
        <input type="text" style="display:none" id="txtFLMDate" />*@


</body>

</html>

@* Search ATM ID's *@
@*<script>
    $(document).ready(function () {
        $("#btnSearch").click(function () {

            $("#txtClickCount").val("0");
            $("#salimshivaraju").hide();
            var fullDate = new Date()
            var twoDigitMonth;

            var mm = (fullDate.getMonth()) + 1;

            if((mm.toString().length) == 1)
            {
                twoDigitMonth = '0' + mm;
            }
            else
            {
                twoDigitMonth = mm;
            }

            var twoDigitDate = ((fullDate.getDate().toString().length) == 1) ? '0' + (fullDate.getDate() + 0) : (fullDate.getDate().toString());

            var currentDate = fullDate.getDate() + "/" + twoDigitMonth + "/" + fullDate.getFullYear();
            var currentDateConvert = fullDate.getFullYear() + "-" + twoDigitMonth + "-" + twoDigitDate;

            var FLMZeroIndex = "0";

            $('#txtCustodianOneId').val("");
            $('#txtCustodianTwoId').val("");
            $('#txtCustodianATMID').val("");
            $('#txtCustodianRouteNo').val("");
            $('#txtCustodianDate').val("");
            $('#txtCustodianOneName').val("");
            $('#txtCustodianTwoName').val("");
            $('#txtCustodianBranch').val("");

            $('#txtQuestionCustiodianOneQ1').text("");
            $('#txtQuestionCustiodianOneQ2').text("");
            $('#txtQuestionCustiodianOneQ3').text("");
            $('#txtQuestionCustiodianOneQ4').text("");

            $('#txtCustodianOneMobile').val("");
            $('#txtCustodianTwoMobile').val("");

            $("#spnAtmId").html("");
            $("#spnRouteNo").html("");
            $("#spnStatus").html("");
            $("#spnLastOtc").html("");

            $('#loading-image').show();
            $('#cover').show();
            $.ajax({
                url: '@Url.Action("ScoDetails")',
                data: {
                    FromDate: $("#txtFromDate").val(),
                    ToDate: $("#txtToDate").val(),
                    ATMID: $("#txtATMID").val()
                },
                dataType: "json",
                type: "POST",
                traditional: true,
                success: function (data) {
                    console.log(data);
                    $("#myDatatable").find("tr:not(:first)").remove();
                    $("#myDatatableFLM").find("tr:not(:first)").remove();
                    $("#myDatatableOTC").find("tr:not(:first)").remove();

                    var trHTML = '';
                    var trHTMLFLM = '';
                    var trHTMLOther = '';
                    $.each(data, function (i, item) {
                        if (data[0].TypeFlag == "SCO") {
                            $('#txtCustodianOneId').val(data[0].Custodian1RegNo);
                            $('#txtCustodianTwoId').val(data[0].Custodian2RegNo);
                            $('#txtCustodianATMID').val(data[0].ATMId);
                            $('#txtCustodianRouteNo').val(data[0].Route);
                            $('#txtCustodianDate').val(data[0].Date);
                            $('#txtCustodianOneName').val(data[0].Custodian1Name);
                            $('#txtCustodianTwoName').val(data[0].Custodian2Name);
                            $('#txtItefolrot').val(data[0].item_route_sheet_id);
                            $('#txtCustodianBranch').val(data[0].BRANCH);
                            $('#txtCustodianOneMobile').val(data[0].Custodian1Mobile);
                            $('#txtCustodianTwoMobile').val(data[0].Custodian2Mobile);
                        }
                        if (data[i].TypeFlag == "FLM" && data[i].OpenClose != "Close") {
                            if (FLMZeroIndex == "0") {
                                $('#txtFLMATMId').val(data[i].FlMATMId);
                                $('#txtFLMDocketNumber').val(data[i].DocketNo);
                                $('#txtFLMDate').val(data[i].OPENDATE);
                                FLMZeroIndex = "1";
                            }
                        }
                        var date = (data[i].Date);

                        $('#Duration').val(data[i].SiteAccessTime);
                        $('#Operation').val(data[i].OperationAccessTime);

                        if (data[i].TypeFlag == "SCO" && (currentDateConvert >= data[i].Date && currentDateConvert <= data[i].CurrentDatePlusOneDay)) {
                            trHTML += '<tr style="font-weight: bold;" id=' + 'SCO' + i + '><td>' + data[i].Date + '</td>' +
                                                '<td>' + data[i].REGION + '</td>' +
                                                '<td>' + data[i].BRANCH + '</td>' +
                                                '<td>' + data[i].CITY + '</td>' +
                                                '<td>' + data[i].MSP + '</td>' +
                                                '<td>' + data[i].BANK + '</td>' +
                                                '<td>' + data[i].ATMId + '</td>' +
                                                '<td  data-toggle="modal" data-target="#myModalLast" style="cursor:pointer;text-decoration: underline;color: blue;">' + data[i].Route + '</td>' +
                                                '<td>' + data[i].Activity + '</td>' +
                                                '<td>' + data[i].Status + '</td>' +
                                                '<td>' + data[i].Custodian1Name + '</td>' +
                                                '<td>' + data[i].Custodian1RegNo + '</td>' +
                                                '<td>' + data[i].Custodian1Mobile + '</td>' +
                                                '<td>' + data[i].Custodian2Name + '</td>' +
                                                '<td>' + data[i].Custodian2RegNo + '</td>' +
                                                '<td>' + data[i].Custodian2Mobile + '</td>' +
                                                '<td style="display:none"> <input type="text" id="txtTypeSco" class="form-control" value="SCO"/></td>' +
                                                '<td style="display:none"> <input type="text" id="txtCallerNumberSco" value="'+ data[i].Custodian2Mobile +'" class="form-control CallerNumber" onkeypress="return IsNumeric(event);" placeholder="Caller Number" maxlength="10" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <input type="text"  onchange="TakeRouteKeyName(\'' + 'SCO' + i + '\',event,\'RouteKeyName\')" class="form-control RouteKeyName" placeholder="Route Key Name" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                //'<td> <input type="text" onchange="TakeRouteKeyName(\'' + 'SCO' + i + '\',event,\'RouteKeyName\')" id="txtRouteKeyNameSco" class="form-control RouteKeyName" placeholder="Route Key Name" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <input type="text" id="txtCombinationNoSco" class="form-control CombinationNo" placeholder="Combination No " style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <input type="text" id="txtRemarksOneSco" class="form-control RemarksOne" placeholder="Remarks One" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <input type="text" id="txtRemarksTwoSco" class="form-control RemarksTwo" placeholder="Remarks Two" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <select class="form-control ddlScoTimeBlock" onchange="TakeTimeBlock(\'' + 'SCO' + i + '\',event,\'ddlScoTimeBlock\')" id="ddlScoTimeBlock" style="background-color:#ecb7f4;width:80px;"> ' +
                                                ' <option>4</option> ' +
                                                ' <option>8</option> ' +
                                                ' <option>12</option> ' +
                                                ' <option>24</option> ' +
                                                ' </select> </td>' +
                                                '<td> <select class="form-control ddlScoLockStatus" onchange="TakeLockStatus(\'' + 'SCO' + i + '\',event,\'ddlScoLockStatus\')"  id="ddlScoLockStatus" style="background-color:#ecb7f4;width:80px;"> ' +
                                                ' <option>0</option> ' +
                                                ' <option>1</option> ' +
                                                ' <option>2</option> ' +
                                                ' <option>3</option> ' +
                                                ' </select> </td>' +
                                                '<td> <button type="button" id="" class="btn btn-primary Click">Save</button></td>' +
                                                '<td style="display: none">' + data[i].item_route_sheet_id + '</td>' +
                                                '<td>' + data[i].ActualTime + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                          '</tr>';
                        }

                        if (data[i].TypeFlag == "BothRMSSCO" && (currentDateConvert >= data[i].Date && currentDateConvert <= data[i].CurrentDatePlusOneDay)) {
                            trHTML += '<tr style="font-weight: bold;" id=' + 'RMS' + i + '><td>' + data[i].Date + '</td>' +
                                                '<td>' + data[i].REGION + '</td>' +
                                                '<td>' + data[i].BRANCH + '</td>' +
                                                '<td>' + data[i].CITY + '</td>' +
                                                '<td>' + data[i].MSP + '</td>' +
                                                '<td>' + data[i].BANK + '</td>' +
                                                '<td>' + data[i].ATMId + '</td>' +
                                                '<td>' + data[i].Route + '</td>' +
                                                '<td>' + data[i].Activity + '</td>' +
                                                '<td>' + data[i].Status + '</td>' +
                                                '<td>' + data[i].Custodian1Name + '</td>' +
                                                '<td>' + data[i].Custodian1RegNo + '</td>' +
                                                '<td>' + data[i].Custodian1Mobile + '</td>' +
                                                '<td>' + data[i].Custodian2Name + '</td>' +
                                                '<td>' + data[i].Custodian2RegNo + '</td>' +
                                                '<td style="display:none"> <input type="text" id="txtTypeSco" class="form-control" value="SCO"/></td>' +
                                                '<td> <input type="text" id="txtCallerNumberSco" class="form-control CallerNumber" onkeypress="return IsNumeric(event);" placeholder="Caller Number" maxlength="10" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <input type="text" onchange="TakeRouteKeyName(\'' + 'RMS' + i + '\',event,\'RouteKeyName\')" id="txtRouteKeyNameSco" class="form-control RouteKeyName" placeholder="Route Key Name" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <input type="text" id="txtCombinationNoSco" class="form-control CombinationNo" placeholder="Combination No " style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <input type="text" id="txtRemarksOneSco" class="form-control RemarksOne" placeholder="Remarks One" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <input type="text" id="txtRemarksTwoSco" class="form-control RemarksTwo" placeholder="Remarks Two" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <button type="button" id="" class="btn btn-primary Click">Save</button></td>' +
                                                '<td style="display: none">' + data[i].item_route_sheet_id + '</td>' +
                                                '<td>' + data[i].ActualTime + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                          '</tr>';
                        }

                        if (data[i].TypeFlag == "SCO" && (currentDateConvert < data[i].Date || currentDateConvert > data[i].CurrentDatePlusOneDay)) {
                            trHTML += '<tr Style="background:#e8c1ba;font-weight: bold;"><td>' + data[i].Date + '</td>' +
                                                '<td>' + data[i].REGION + '</td>' +
                                                '<td>' + data[i].BRANCH + '</td>' +
                                                '<td>' + data[i].CITY + '</td>' +
                                                '<td>' + data[i].MSP + '</td>' +
                                                '<td>' + data[i].BANK + '</td>' +
                                                '<td>' + data[i].ATMId + '</td>' +
                                                '<td>' + data[i].Route + '</td>' +
                                                '<td>' + data[i].Activity + '</td>' +
                                                '<td>' + data[i].Status + '</td>' +
                                                '<td>' + data[i].Custodian1Name + '</td>' +
                                                '<td>' + data[i].Custodian1RegNo + '</td>' +
                                                '<td>' + data[i].Custodian2Name + '</td>' +
                                                '<td>' + data[i].Custodian2RegNo + '</td>' +
                                                '<td style="display:none"> <input type="text" id="txtType" class="form-control" value="SCO" /></td>' +
                                                '<td> <input type="text" id="txtCaller" class="form-control" placeholder="Caller Number" readonly="true"/></td>' +
                                                '<td> <input type="text" id="txtRouteKey" class="form-control" placeholder="Route Key Name" readonly="true"/></td>' +
                                                '<td> <input type="text" id="txtCombination" class="form-control" placeholder="Combination No" readonly="true"/></td>' +
                                                '<td> <input type="text" id="txtRemarks1" class="form-control" placeholder="Remarks One" readonly="true"/></td>' +
                                                '<td> <input type="text" id="txtRemarks2" class="form-control" placeholder="Remarks Two" readonly="true"/></td>' +
                                                '<td> <button type="button" id="btnSaveUserDetailsScosco1" class="btn btn-primary" disabled>Save</button></td>' +
                                                '<td style="display: none">' + data[i].item_route_sheet_id + '</td>' +
                                                '<td>' + data[i].ActualTime + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                          '</tr>';
                        }
                        if (data[i].TypeFlag == "RMS") {
                            trHTML += '<tr Style="background:#90ee90;font-weight: bold;"><td>' + data[i].Date + '</td>' +
                                                '<td>' + data[i].REGION + '</td>' +
                                                '<td>' + data[i].BRANCH + '</td>' +
                                                '<td>' + data[i].CITY + '</td>' +
                                                '<td>' + data[i].MSP + '</td>' +
                                                '<td>' + data[i].BANK + '</td>' +
                                                '<td>' + data[i].ATMId + '</td>' +
                                                '<td>' + data[i].Route + '</td>' +
                                                '<td>' + data[i].Activity + '</td>' +
                                                '<td>' + data[i].Status + '</td>' +
                                                '<td>' + data[i].Custodian1Name + '</td>' +
                                                '<td>' + data[i].Custodian1RegNo + '</td>' +
                                                '<td>' + data[i].Custodian2Name + '</td>' +
                                                '<td>' + data[i].Custodian2RegNo + '</td>' +
                                                '<td style="display:none"> <input type="text" id="txtType" class="form-control" value="SCO" /></td>' +
                                                '<td>' + data[i].CallerNumber + '</td>' +
                                                '<td>' + data[i].RouteKeyName + '</td>' +
                                                '<td>' + data[i].CombinationNo + '</td>' +
                                                '<td>' + data[i].RemarksOne + '</td>' +
                                                '<td>' + data[i].RemarksTwo + '</td>' +
                                                '<td> <button type="button" id="btnSaveUserDetailsSco" class="btn btn-primary FlmClick" disabled>Save</button></td>' +
                                                '<td  style="display:none">' + data[i].item_route_sheet_id + '</td>' +
                                                '<td>' + data[i].ActualTime + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                          '</tr>';
                        }

                        //This is code which need to change for flm otc integration
                        if (data[i].TypeFlag == "FLM" && data[i].OpenClose != "CLOSE" && data[i].OpenClose != "SLM") {
                            trHTMLFLM += '<tr style="font-weight: bold;" id=' + 'FLM' + i + '><td>' + data[i].FlMATMId + '</td>' +
                                                '<td>' + data[i].OPENDATE + '</td>' +
                                                '<td>' + data[i].DocketNo + '</td>' +
                                                '<td  data-toggle="modal" data-target="#myModalLast" style="cursor:pointer;text-decoration: underline;color: blue;">' + data[i].Route_Id + '</td>' +
                                                '<td style="display:none">' + data[i].Branch + '</td>' +
                                                '<td>' + data[i].Remarks + '</td>' +
                                                '<td>' + data[i].OpenClose + '</td>' +
                                                '<td><input type="text" id="txtType1" class="form-control FlmRemarks" value="' + data[i].FlmRemarks + '" title="' + data[i].FlmRemarks + '" readonly="true" style="width:150px;"/></td>' +
                                                '<td style="display:none"> <input type="text" id="txtTypeFlm" class="form-control" value="FLM" /></td>' +
                                                '<td> <input type="text" class="form-control FlmCallerNumber" maxlength="10" onkeypress="return IsNumeric(event);" placeholder="Caller Number" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <input type="text" onchange="TakeRouteKeyName(\'' + 'FLM' + i + '\',event,\'FLMRouteKeyName\')" id="txtRouteKeyNameFlm2" class="form-control FLMRouteKeyName" placeholder="Route Key Name" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <input type="text" id="txtCombinationNoFlm2" class="form-control FLMCombinationNo" placeholder="Combination No" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <input type="text" id="txtRemarksOneFlm2" class="form-control FlmRemarksOne" placeholder="Remarks One" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <input type="text" id="txtRemarksTwoFlm2" class="form-control FlmRemarksTwo" placeholder="Remarks Two" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <button type="button" id="btnSaveUserDetailsFlm" class="btn btn-primary FlmClick">Save</button></td>' +
                                                 '<td>' + data[i].ActualTime + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                                '<td> <select class="form-control ddlFlmTimeBlock" onchange="TakeTimeBlock(\'' + 'FLM' + i + '\',event,\'ddlFlmTimeBlock\')" id="ddlFlmTimeBlock" style="background-color:#ecb7f4;width:80px;"> ' +
                                                ' <option>4</option> ' +
                                                ' <option>8</option> ' +
                                                ' <option>12</option> ' +
                                                ' <option>24</option> ' +
                                                ' </select> </td>' +
                                                '<td> <select class="form-control ddlFlmLockStatus" onchange="TakeLockStatus(\'' + 'FLM' + i + '\',event,\'ddlFlmLockStatus\')"  id="ddlFlmLockStatus" style="background-color:#ecb7f4;width:80px;"> ' +
                                                ' <option>0</option> ' +
                                                ' <option>1</option> ' +
                                                ' <option>2</option> ' +
                                                ' <option>3</option> ' +
                                                ' </select> </td>' +
                                          '</tr>';
                        }
                        if (data[i].TypeFlag == "FLM" && (data[i].OpenClose == "CLOSE" )) {
                            trHTMLFLM += '<tr Style="background:#e8c1ba;font-weight: bold;"><td>' + data[i].FlMATMId + '</td>' +
                                                '<td>' + data[i].OPENDATE + '</td>' +
                                                '<td>' + data[i].DocketNo + '</td>' +
                                                '<td>' + data[i].Route_Id + '</td>' +
                                                '<td style="display:none">' + data[i].Branch + '</td>' +
                                                '<td>' + data[i].Remarks + '</td>' +
                                                '<td>' + data[i].OpenClose + '</td>' +
                                                '<td><input type="text" id="txtType" class="form-control FlmRemarks" value="' + data[i].FlmRemarks + '" title="' + data[i].FlmRemarks + '" readonly="true"/></td>' +
                                                '<td style="display:none"> <input type="text" id="txtTypeFlm1" class="form-control" value="FLM" /></td>' +
                                                '<td> <input type="text" id="txtCallerNumberFLM1" class="form-control" placeholder="CallerNumber" readonly="true"/></td>' +
                                                '<td> <input type="text" id="txtRouteKeyNameFlm1" class="form-control" placeholder="Route Key Name" readonly="true"/></td>' +
                                                '<td> <input type="text" id="txtCombinationNoFlm1" class="form-control" placeholder="Combination No" readonly="true"/></td>' +
                                                '<td> <input type="text" id="txtRemarksOneFlm1" class="form-control" placeholder="Remarks One" readonly="true"/></td>' +
                                                '<td> <input type="text" id="txtRemarksTwoFlm1" class="form-control" placeholder="Remarks Two" readonly="true"/></td>' +
                                                '<td> <button type="button" id="btnSaveUserDetailsFlm3" class="btn btn-primary"  disabled>Save</button></td>' +
                                                '<td>' + data[i].ActualTime + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                          '</tr>';
                        }
                        //NEW FLM SLM
                        if (data[i].TypeFlag == "FLM" && data[i].OpenClose == "SLM") {
                            trHTMLFLM += '<tr style="font-weight: bold;"><td>' + data[i].FlMATMId + '</td>' +
                                                '<td>' + data[i].OPENDATE + '</td>' +
                                                '<td>' + data[i].DocketNo + '</td>' +
                                                '<td  data-toggle="modal" data-target="#myModalLast" style="cursor:pointer;text-decoration: underline;color: blue;">' + data[i].Route_Id + '</td>' +
                                                '<td style="display:none">' + data[i].Branch + '</td>' +
                                                '<td>' + data[i].Remarks + '</td>' +
                                                '<td>' + data[i].OpenClose + '</td>' +
                                                '<td><input type="text" id="txtType1" class="form-control FlmRemarks" value="' + data[i].FlmRemarks + '" title="' + data[i].FlmRemarks + '" readonly="true" style="width:150px;"/></td>' +
                                                '<td style="display:none"> <input type="text" id="txtTypeFlm" class="form-control" value="FLM" /></td>' +
                                                '<td> <input type="text" class="form-control FlmCallerNumber" maxlength="10" onkeypress="return IsNumeric(event);" placeholder="Caller Number" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <input type="text" id="txtRouteKeyNameFlm2" class="form-control FLMRouteKeyName" placeholder="Route Key Name" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <input type="text" id="txtCombinationNoFlm2" class="form-control FLMCombinationNo" placeholder="Combination No" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <input type="text" id="txtRemarksOneFlm2" class="form-control FlmRemarksOne" placeholder="Remarks One" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <input type="text" id="txtRemarksTwoFlm2" class="form-control FlmRemarksTwo" placeholder="Remarks Two" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                '<td> <button type="button" id="btnSaveUserDetailsFlm" class="btn btn-primary FlmClick">Save</button></td>' +
                                                 '<td>' + data[i].ActualTime + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                          '</tr>';
                        }
                        if (data[i].TypeFlag == "RMSFLM") {
                            trHTMLFLM += '<tr Style="background:#90ee90;font-weight: bold;"><td>' + data[i].FlMATMId + '</td>' +
                                                '<td>' + data[i].OPENDATE + '</td>' +
                                                '<td>' + data[i].DocketNo + '</td>' +
                                                '<td>' + data[i].Route_Id + '</td>' +
                                                '<td style="display:none">' + data[i].Branch + '</td>' +
                                                '<td>' + data[i].Remarks + '</td>' +
                                                '<td>' + data[i].OpenClose + '</td>' +
                                                '<td><input type="text" id="txtType2" class="form-control FlmRemarks" value="' + data[i].FlmRemarks + '" title="' + data[i].FlmRemarks + '" readonly="true"/></td>' +
                                                '<td style="display:none"> <input type="text" id="txtTypeFlm1" class="form-control" value="FLM" /></td>' +
                                                '<td>' + data[i].FLMCallerNumber + '</td>' +
                                                '<td>' + data[i].FLMRouteKeyName + '</td>' +
                                                '<td>' + data[i].FLMCombinationNo + '</td>' +
                                                '<td>' + data[i].FLMRemarksOne + '</td>' +
                                                '<td>' + data[i].FLMRemarksTwo + '</td>' +
                                                '<td> <button type="button" id="btnSaveUserDetailsFlm1" class="btn btn-primary"  disabled>Save</button></td>' +
                                                '<td>' + data[i].ActualTime + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                                '<td>' + data[i].UserName + '</td>' +
                                          '</tr>';
                        }

                        if (data[i].TypeFlag == "BothRMSFLMData") {
                            if (data[i].OpenClose != "CLOSE") {
                                trHTMLFLM += '<tr style="font-weight: bold;" id=' + 'BothRMSFLMData' + i + '><td>' + data[i].FlMATMId + '</td>' +
                                                    '<td>' + data[i].OPENDATE + '</td>' +
                                                    '<td>' + data[i].DocketNo + '</td>' +
                                                    '<td  data-toggle="modal" data-target="#myModalLast" style="cursor:pointer;text-decoration: underline;color: blue;">' + data[i].Route_Id + '</td>' +
                                                    '<td style="display:none">' + data[i].Branch + '</td>' +
                                                    '<td>' + data[i].Remarks + '</td>' +
                                                    '<td>' + data[i].OpenClose + '</td>' +
                                                    '<td><input type="text" id="txtType3" class="form-control FlmRemarks" value="' + data[i].FlmRemarks + '" title="' + data[i].FlmRemarks + '" readonly="true"/></td>' +
                                                    '<td style="display:none"> <input type="text" id="txtTypeFlm" class="form-control" value="FLM" /></td>' +
                                                    '<td> <input type="text" id="txtCallerNumberFlm2" class="form-control FlmCallerNumber" maxlength="10" onkeypress="return IsNumeric(event);" placeholder="Caller Number" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                    '<td> <input type="text" onchange="TakeRouteKeyName(\'' + 'BothRMSFLMData' + i + '\',event,\'FLMRouteKeyName\')" id="txtRouteKeyNameFlm2" class="form-control FLMRouteKeyName" placeholder="Route Key Name" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                    '<td> <input type="text" id="txtCombinationNoFlm2" class="form-control FLMCombinationNo" placeholder="Combination No" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                    '<td> <input type="text" id="txtRemarksOneFlm2" class="form-control FlmRemarksOne" placeholder="Remarks One" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                    '<td> <input type="text" id="txtRemarksTwoFlm2" class="form-control FlmRemarksTwo" placeholder="Remarks Two" style="background-color:#ecb7f4;width:100px;"/></td>' +
                                                    '<td> <button type="button" id="btnSaveUserDetailsFlm" class="btn btn-primary FlmClick">Save</button></td>' +
                                                    '<td>' + data[i].ActualTime + '</td>' +
                                                    '<td>' + data[i].UserName + '</td>' +
                                                    '<td> <select class="form-control ddlFlmTimeBlock" onchange="TakeTimeBlock(\'' + 'BothRMSFLMData' + i + '\',event,\'ddlFlmTimeBlock\')" id="ddlFlmTimeBlock" style="background-color:#ecb7f4;width:80px;"> ' +
                                                    ' <option>4</option> ' +
                                                    ' <option>8</option> ' +
                                                    ' <option>12</option> ' +
                                                    ' <option>24</option> ' +
                                                    ' </select> </td>' +
                                                    '<td> <select class="form-control ddlFlmLockStatus" onchange="TakeLockStatus(\'' + 'BothRMSFLMData' + i + '\',event,\'ddlFlmLockStatus\')"  id="ddlFlmLockStatus" style="background-color:#ecb7f4;width:80px;"> ' +
                                                    ' <option>0</option> ' +
                                                    ' <option>1</option> ' +
                                                    ' <option>2</option> ' +
                                                    ' <option>3</option> ' +
                                                    ' </select> </td>' +
                                              '</tr>';
                            }

                            if (data[i].OpenClose == "CLOSE") {
                                trHTMLFLM += '<tr Style="background:#e8c1ba;font-weight: bold;"><td>' + data[i].FlMATMId + '</td>' +
                                             '<td>' + data[i].OPENDATE + '</td>' +
                                             '<td>' + data[i].DocketNo + ' CLOSE</td>' +
                                             '<td>' + data[i].Route_Id + '</td>' +
                                             '<td style="display:none">' + data[i].Branch + '</td>' +
                                             '<td>' + data[i].Remarks + '</td>' +
                                             '<td>' + data[i].OpenClose + '</td>' +
                                             '<td><input type="text" id="txtType" class="form-control FlmRemarks" value="' + data[i].FlmRemarks + '" title="' + data[i].FlmRemarks + '" readonly="true"/></td>' +
                                             '<td style="display:none"> <input type="text" id="txtTypeFlm1" class="form-control" value="FLM" /></td>' +
                                             '<td> <input type="text" id="txtCallerNumberFLM1" class="form-control" placeholder="CallerNumber" readonly="true"/></td>' +
                                             '<td> <input type="text" id="txtRouteKeyNameFlm1" class="form-control" placeholder="Route Key Name" readonly="true"/></td>' +
                                             '<td> <input type="text" id="txtCombinationNoFlm1" class="form-control" placeholder="Combination No" readonly="true"/></td>' +
                                             '<td> <input type="text" id="txtRemarksOneFlm1" class="form-control" placeholder="Remarks One" readonly="true"/></td>' +
                                             '<td> <input type="text" id="txtRemarksTwoFlm1" class="form-control" placeholder="Remarks Two" readonly="true"/></td>' +
                                             '<td> <button type="button" id="btnSaveUserDetailsFlm3" class="btn btn-primary"  disabled>Save</button></td>' +
                                             '<td>' + data[i].ActualTime + '</td>' +
                                             '<td>' + data[i].UserName + '</td>' +
                                             '<td>' + data[i].UserName + '</td>' +
                                             '<td>' + data[i].UserName + '</td>' +
                                       '</tr>';
                            }
                        }
                        //End of FLM Segment
                        if (data[i].TypeFlag == "OtherRMS") {
                            trHTMLOther += '<tr Style="background:#90ee90;font-weight: bold;"><td>' + data[i].OtherActivity + '</td>' +
                                                '<td>' + data[i].OtherCallerNumber + '</td>' +
                                                '<td>' + data[i].OtherDate + '</td>' +
                                                '<td>' + data[i].OtherRouteKeyName + '</td>' +
                                                '<td>' + data[i].OtherCombinationNo + '</td>' +
                                                '<td>' + data[i].OtherRemarksOne + '</td>' +
                                                '<td>' + data[i].OtherRemarksTwo + '</td>' +
                                                '<td style="display:none"> <input type="text" id="txtTypeOTC" class="form-control" value="OTC" /></td>' +
                                                '<td>' + data[i].OtherCombinationIssuedBy + '</td>' +
                                                '<td>' + data[i].OtherCombinationIssuedTime + '</td>' +
                                                '<td>' + data[i].OtherATMID + '</td>' +
                                                '<td>' + data[i].OtherATMID + '</td>' +
                                                '<td>' + data[i].OtherATMID + '</td>' +
                                          '</tr>';
                        }
                    });

                    $('#myDatatable').append(trHTML);//To add the table row to table
                    $('#myDatatableFLM').append(trHTMLFLM);//To add the table row to table
                    $('#myDatatableOTC').append(trHTMLOther);//To add the table row to table


                },
                complete: function () {
                    $('#loading-image').hide();
                    $('#cover').hide();
                },
                error: function (response) {
                    alert(response.responseText);
                    $('#loading-image').hide();
                },
                failure: function (response) {
                    alert(response.responseText);
                    $('#loading-image').hide();
                }
            });
            $.ajax({
                url: '@Url.Action("SearchMessageDetails")',
                data: {
                },
                dataType: "json",
                type: "POST",
                traditional: true,
                success: function (data) {
                    $(".messages li").remove();
                    $.each(data, function (i, item) {
                        var date = (data[i].Date);

                        messagesContainer = $('.messages');
                        messagesContainer.append([
                            '<li class="self" onclick="GetId(' + data[i].RecId + ',\'' + data[i].MessageBox + '\')" value="' + data[i].RecId + '">',
                             data[i].MessageBox,
                            '</li>'
                        ].join(''));

                    });
                },
                complete: function () {
                },
                error: function (response) {
                    alert(response.responseText);
                },
                failure: function (response) {
                    alert(response.responseText);
                }
            });
            $.ajax({
                url: '@Url.Action("GetOTCRouteStatus")',
                data: {
                    FromDate: $("#txtFromDate").val(),
                    ToDate: $("#txtToDate").val(),
                    ATMID: $("#txtATMID").val()
                },
                dataType: "json",
                type: "POST",
                traditional: true,
                success: function (data) {
                    $("#spnAtmId").html(data[0].AtmId);
                    $("#spnRouteNo").html(data[0].RouteNo);
                    $("#spnStatus").html(data[0].Status);
                    $("#spnLastOtc").html(data[0].LastOtcTaken);
                },
                complete: function () {
                },
                error: function (response) {
                    alert(response.responseText);
                },
                failure: function (response) {
                    alert(response.responseText);
                }
            });
        });
    });
</script>*@

@* Find tr row Details and save to database Sco Details*@
@*<script type="text/javascript">
    var UserID = '@Session["UserId"]';
    $("#myDatatable").on("click", "td:nth-child(21)", function () {
    //$("#myDatatable").on("click", ".Click", function () {

        var Date = ($(this).closest('tr').find('td').eq(0).text());
        var Region = ($(this).closest('tr').find('td').eq(1).text());
        var Branch = ($(this).closest('tr').find('td').eq(2).text());
        var City = ($(this).closest('tr').find('td').eq(3).text());
        var Msp = ($(this).closest('tr').find('td').eq(4).text());
        var Bank = ($(this).closest('tr').find('td').eq(5).text());
        var ATMID = ($(this).closest('tr').find('td').eq(6).text());
        var RouteNo = ($(this).closest('tr').find('td').eq(7).text());
        var Activity = ($(this).closest('tr').find('td').eq(8).text());
        var Status = ($(this).closest('tr').find('td').eq(9).text());
        var Custodian1Name = ($(this).closest('tr').find('td').eq(10).text());
        var Custodian1RegNo = ($(this).closest('tr').find('td').eq(11).text());
        var Custodian2Name = ($(this).closest('tr').find('td').eq(12).text());
        var Custodian2RegNo = ($(this).closest('tr').find('td').eq(13).text());
        var CallerNumber = ($(this).closest('tr').find('.CallerNumber').val());
        var RouteKeyName = ($(this).closest('tr').find('.RouteKeyName').val());
        var CombinationNo = ($(this).closest('tr').find('.CombinationNo').val());
        var RemarksOne = ($(this).closest('tr').find('.RemarksOne').val());
        var RemarksTwo = ($(this).closest('tr').find('.RemarksTwo').val());
        var ItemRouteSheetID = ($(this).closest('tr').find('td').eq(21).text());

        if (CallerNumber == '' || CallerNumber == null) {
            alert('Please Enter CallerNumber!');
            //$(".CallerNumber").focus();
            return;
        }

        if (RouteKeyName == '' || RouteKeyName == null) {
            alert('Please Enter Route Key Name!');
            //$(".RouteKeyName").focus();
            return;
        }

        if (CombinationNo == '' || CombinationNo == null) {
            alert('Please Enter Combination NUmber!');
            //$(".CombinationNo").focus();
            return;
        }

        $.ajax({
            url: '@Url.Action("SaveScoDetails")',
            data: {
                ATMId: ATMID,
                Date: Date,
                REGION: Region,
                BRANCH: Branch,
                CITY: City,
                MSP: Msp,
                BANK: Bank,
                Route: RouteNo,
                Activity: Activity,
                Status: Status,
                Custodian1Name: Custodian1Name,
                Custodian1RegNo: Custodian1RegNo,
                Custodian2Name: Custodian2Name,
                Custodian2RegNo: Custodian2RegNo,
                CallerNumber: CallerNumber,
                RouteKeyName: RouteKeyName,
                CombinationNo: CombinationNo,
                RemarksOne: RemarksOne,
                RemarksTwo: RemarksTwo,
                UserID: UserID,
                ItemRouteSheetId: ItemRouteSheetID
            },
            dataType: "json",
            type: "POST",
            traditional: true,
            success: function (data) {
                $("#btnSearch").click();
                alert(data.Message);
            },
            error: function (response) {
                alert(response.responseText);
            },
            failure: function (response) {
                alert(response.responseText);
            }
        });
    });
</script>*@

@* Find tr row Details and save to database FLM Details*@
<script type="text/javascript">
    var UserID = '@Session["UserId"]';
    //$("#myDatatableFLM").on("click", ".FlmClick", function () {
    $("#myDatatableFLM").on("click", "td:nth-child(15)", function () {
        //alert("working");
        var ATMID = ($(this).closest('tr').find('td').eq(0).text());
        var Date = ($(this).closest('tr').find('td').eq(1).text());
        var DocketNumber = ($(this).closest('tr').find('td').eq(2).text());
        var CallType = ($(this).closest('tr').find('td').eq(3).text());  //this is route_no as table design is old
        var Remarks = ($(this).closest('tr').find('td').eq(5).text());
        var OpenClose = ($(this).closest('tr').find('td').eq(6).text());
        var CallerNumber = ($(this).closest('tr').find('.FlmCallerNumber').val());
        var RouteKeyName = ($(this).closest('tr').find('.FLMRouteKeyName').val());
        var CombinationNo = ($(this).closest('tr').find('.FLMCombinationNo').val());
        var RemarksOne = ($(this).closest('tr').find('.FlmRemarksOne').val());
        var RemarksTwo = ($(this).closest('tr').find('.FlmRemarksTwo').val());
        var FLMRemarks = ($(this).closest('tr').find('.FlmRemarks').val());

        if (CallerNumber == '' || CallerNumber == null) {
            alert('Please Enter Caller Number!');
            //$(".FlmCallerNumber").focus();
            return;
        }

        if (RouteKeyName == '' || RouteKeyName == null) {
            alert('Please Enter Route Key Name!');
           // $(".FLMRouteKeyName").focus();
            return;
        }

        if (CombinationNo == '' || CombinationNo == null) {
            alert('Please Enter Combination NUmber!');
           // $(".FLMCombinationNo").focus();
            return;
        }

        $.ajax({
            url: '@Url.Action("SaveFlmDetails")',
            data: {
                ATMId: ATMID,
                Date: Date,
                DocketNumber: DocketNumber,
                CallType: CallType,
                Remarks: Remarks,
                OpenClose: OpenClose,
                CallerNumber: CallerNumber,
                RouteKeyName: RouteKeyName,
                CombinationNo: CombinationNo,
                RemarksOne: RemarksOne,
                RemarksTwo: RemarksTwo,
                UserID: UserID,
                FlmRemarks: FLMRemarks
            },
            dataType: "json",
            type: "POST",
            traditional: true,
            success: function (data) {
                $("#btnSearch").click();
                alert(data.Message);
            },
            error: function (response) {
                alert(response.responseText);
            },
            failure: function (response) {
                alert(response.responseText);
            }
        });
    });
</script>

@* On Button Close Click *@
<script>
    $(document).ready(function () {
        $("#btnclose").click(function () {
            $("#txtManualATMID").val("");
            $("#ddlActivity").val("Select");
            $("#txtRouteKeyName").val("");
            $("#txtCombinationNo").val("");
            $("#txtRemarks1").val("");
            $("#txtRemarks2").val("");
            $("#txtCallerNumber").val("");
        });
    });
</script>

@* On Button Save Click *@
@*<script>
    $(document).ready(function () {
        var UserID = '@Session["UserId"]';
        $("#btnSaveManualDetails").click(function () {

            if ($("#ddlActivity").val().trim() == '' || $("#ddlActivity").val() == 'Select') {
                alert('Please Select Activity!');
                $("#ddlActivity").focus();
                return;
            }
            if ($("#txtManualATMID").val().trim() == '' || $("#txtManualATMID").val() == null) {
                alert('Please Enter ATM ID Details!');
                $("#txtManualATMID").focus();
                return;
            }
            if ($("#txtCallerNumber").val().trim() == '' || $("#txtCallerNumber").val() == null) {
                alert('Please Enter Caller Number!');
                $("#txtCallerNumber").focus();
                return;
            }
            if ($("#txtRouteKeyName").val() == '' || $("#txtRouteKeyName").val() == null) {
                alert('Please Enter Route Key Name Details!');
                $("#txtRouteKeyName").focus();
                return;
            }
            if ($("#txtCombinationNo").val() == '' || $("#txtCombinationNo").val() == null) {
                alert('Please Enter Combination Number!');
                $("#txtCombinationNo").focus();
                return;
            }
            if ($("#txtRemarks1").val() == '' || $("#txtRemarks1").val() == null) {
                alert('Please Enter Remarks!');
                $("#txtRemarks1").focus();
                return;
            }

            $.ajax({
                url: '@Url.Action("ManualDetailsSave")',
                data: {
                    Date: $("#txtDate").val(),
                    Activity: $("#ddlActivity").val(),
                    ATMID: $("#txtManualATMID").val(),
                    CallerNumber: $("#txtCallerNumber").val(),
                    RouteKeyName: $("#txtRouteKeyName").val(),
                    CombinationNo: $("#txtCombinationNo").val(),
                    RemarksOne: $("#txtRemarks1").val(),
                    RemarksTwo: $("#txtRemarks2").val(),
                    UserID: UserID,
                    IsManual : 1,
                },
                dataType: "json",
                type: "POST",
                traditional: true,
                success: function (data) {
                    $("#btnclose").click();
                    $("#salimshivaraju").show();
                },
                complete: function () {
                    $('#loading-image').hide();
                },
                error: function (response) {
                    alert(response.responseText);
                    $('#loading-image').hide();
                },
                failure: function (response) {
                    alert(response.responseText);
                    $('#loading-image').hide();
                }
            });
            $("#btnclose").click();
        });
    });
</script>*@

@* Only Numeric *@
<script>
    var specialKeys = new Array();
    specialKeys.push(8); //Backspace
    function IsNumeric(e) {
        var keyCode = e.which ? e.which : e.keyCode
        var ret = ((keyCode >= 48 && keyCode <= 57) || specialKeys.indexOf(keyCode) != -1);
        //document.getElementById("error").style.display = ret ? "none" : "inline";
        return ret;
    }

    function isDecimal(evt) {
        var charCode = (evt.which) ? evt.which : event.keyCode
        if (charCode != 46 && charCode > 31 && (charCode < 48 || charCode > 57))
            return false;

        return true;
    }

</script>

@* Finding Total Count *@
<script>
    $(document).ready(function () {
        var UserID = '@Session["UserId"]';
        $("#btnCount").click(function () {
            var fullDate = new Date()
            //convert month to 2 digits
            var twoDigitMonth = ((fullDate.getMonth().length + 1) == 1) ? '0' + (fullDate.getMonth() + 0) : (fullDate.getMonth() + 1);
                //((fullDate.getMonth().length + 1) === 1) ? (fullDate.getMonth() + 1) : '0' + (fullDate.getMonth() + 1);
            var twoDigitDate = ((fullDate.getDate().toString().length) == 1) ? '0' + (fullDate.getDate() + 0) : (fullDate.getDate().toString());

            var currentDate = fullDate.getDate() + "/" + twoDigitMonth + "/" + fullDate.getFullYear();
            var currentDateConvert = fullDate.getFullYear() + "-" + twoDigitMonth + "-" + twoDigitDate;
            $.ajax({
                url: '@Url.Action("TotalCountValue")',
                data: {
                    Date :currentDateConvert,
                    UserId: UserID
                },
        dataType: "json",
        type: "POST",
        traditional: true,
        success: function (data) {
            $.each(data, function (i, item) {
                $("#Count").text("" + data[i].Value);
            });
        },
        error: function (response) {
            alert(response.responseText);
        },
        failure: function (response) {
            alert(response.responseText);
        }
    });
        });
    });

</script>

<script>
    $(document).ready(function () {
        $("#AddOther").click(function () {
            $.ajax({
                url: '@Url.Action("Index")',
                 dataType: "json",
                 type: "POST",
                 traditional: true,
                 //success: function (data) {

                 //},
                 //error: function (response) {
                 //    alert(response.responseText);
                 //},
                 //failure: function (response) {
                 //    alert(response.responseText);
                 //}
             });
        });
    });

</script>

@* Floating Chat Window *@
<script>
    var element = $('.floating-chat');
    var myStorage = localStorage;

    if (!myStorage.getItem('chatID')) {
        myStorage.setItem('chatID', createUUID());
    }

    setTimeout(function () {
        element.addClass('enter');
    }, 1000);

    element.click(openElement);

    function openElement() {
        var messages = element.find('.messages');
        var textInput = element.find('.text-box');
        element.find('>i').hide();
        element.addClass('expand');
        element.find('.chat').addClass('enter');
        var strLength = textInput.val().length * 2;
        textInput.keydown(onMetaAndEnter).prop("disabled", false).focus();
        element.off('click', openElement);
        element.find('.header button').click(closeElement);
        element.find('#sendMessage').click(sendNewMessage);
        messages.scrollTop(messages.prop("scrollHeight"));
    }

    function closeElement() {
        element.find('.chat').removeClass('enter').hide();
        element.find('>i').show();
        element.removeClass('expand');
        element.find('.header button').off('click', closeElement);
        element.find('#sendMessage').off('click', sendNewMessage);
        element.find('.text-box').off('keydown', onMetaAndEnter).prop("disabled", true).blur();
        setTimeout(function () {
            element.find('.chat').removeClass('enter').show()
            element.click(openElement);
        }, 500);
    }

    function createUUID() {

        var s = [];
        var hexDigits = "0123456789abcdef";
        for (var i = 0; i < 36; i++) {
            s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
        }
        s[14] = "4"; // bits 12-15 of the time_hi_and_version field to 0010
        s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01
        s[8] = s[13] = s[18] = s[23] = "-";

        var uuid = s.join("");
        return uuid;
    }

    function sendNewMessage() {
        var UserID = '@Session["UserId"]';
        var messagesContainer = "";
        var Isinsert = "";

        if ($("#sendMessage").text() == "send") {
            Isinsert = 0;
        }
        if ($("#sendMessage").text() == "Update") {
            Isinsert = $("#MessageId").val();
        }

        $.ajax({
            url: '@Url.Action("SaveMessageDetails")',
            data: {
                Message: $('#textbox').val(),
                UserId: UserID,
                Isinsert: Isinsert,
            },
            dataType: "json",
            type: "POST",
            traditional: true,
            success: function (data) {
                console.log(data.Message);
                if (data.Message == "Successfully Inserted") {
                    //if (!newMessage) return;

                    // messagesContainer = $('.messages');

                    //messagesContainer.append([
                    //    '<li class="self">',
                    //    newMessage,
                    //    '</li>'
                    //].join(''));

                    $.ajax({
                        url: '@Url.Action("SearchMessageDetails")',
                        data: {
                        },
                        dataType: "json",
                        type: "POST",
                        traditional: true,
                        success: function (data) {
                            $(".messages li").remove();
                            $.each(data, function (i, item) {
                                messagesContainer = $('.messages');

                                messagesContainer.append([
                                    '<li class="self" onclick="GetId(' + data[i].RecId + ',\'' + data[i].MessageBox + '\')" value="' + data[i].RecId + '">',
                            data[i].MessageBox,
                           '</li>'
                                ].join(''));

                            });
                        },
                        complete: function () {
                        },
                        error: function (response) {
                            alert(response.responseText);
                        },
                        failure: function (response) {
                            alert(response.responseText);
                        }
                    });
                }

                //Change Id Details
                if ($("#sendMessage").text() == "send") {
                    $("#sendMessage").text("Update")
                }
                if ($("#sendMessage").text() == "Update") {
                    $("#sendMessage").text("send")
                }

                //Clear Chat box
                $('#textbox').val("");

                //Focus on Chat box
                $('#textbox').focus();
            },
            complete: function () {
                $('#loading-image').hide();
                $('#cover').hide();
            },
            error: function (response) {
                alert(response.responseText);
            },
            failure: function (response) {
                alert(response.responseText);
            }
        });

        messagesContainer.animate({
            scrollTop: messagesContainer(messages.scrollTop(messages.prop("scrollHeight")))
        }, 250);
    }

    function onMetaAndEnter(event) {
        if ((event.metaKey || event.ctrlKey) && event.keyCode == 13) {
            sendNewMessage();
        }
    }
</script>

@* Search Message On Load *@
<script>
    $(document).ready(function () {
        //function SearchMessage() {
        $.ajax({
            url: '@Url.Action("SearchMessageDetails")',
            data: {
            },
            dataType: "json",
            type: "POST",
            traditional: true,
            success: function (data) {
                $(".messages li").remove();
                $.each(data, function (i, item) {
                    var date = (data[i].Date);
                    messagesContainer = $('.messages');
                    messagesContainer.append([
                        '<li class="self" onclick="GetId(' + data[i].RecId + ',\'' + data[i].MessageBox + '\')" value="' + data[i].RecId + '">',
                         data[i].MessageBox,
                        '</li>'
                    ].join(''));

                });
            },
            complete: function () {
            },
            error: function (response) {
                alert(response.responseText);
            },
            failure: function (response) {
                alert(response.responseText);
            }
        });
        //}
    });
</script>

@* Message Get ID *@
<script>
    function GetId(id, value) {
        $("#MessageId").val(id);
        $("#textbox").val(value);

        var ButtonText = $("#sendMessage").text();
        if (ButtonText == "send") {
            $("#sendMessage").text("Update")
        }
    }
</script>

@* Reset Details *@
<script>
    function reset() {
        $("#MessageId").val("");
        $("#textbox").val("");

        var ButtonText = $("#sendMessage").text();
        if (ButtonText == "Update") {
            $("#sendMessage").text("send")
        }
    }
</script>

@* Question Mark Button Click *@
@*<script>
    $(document).ready(function () {
        $("#Question").click(function () {
            var FromDate = $("#txtFromDate").val();
            var ToDate = $("#txtToDate").val();

            $('#txtQuestionCustiodianOneQ1').text("");
            $('#txtQuestionCustiodianOneQ2').text("");
            $('#txtQuestionCustiodianOneQ3').text("");
            $('#txtQuestionCustiodianOneQ4').text("");


            if ($("#txtATMID").val() == "" || $("#txtATMID").val() == null) {
                alert("Please Enter ATM Id ");
                $("#ForQuestion").removeClass("ForQuestion");
                return;
            }

            if (FromDate != ToDate) {
                alert("Please Select Current Date Only");
                $("#ForQuestion").removeClass("ForQuestion");
                return;
            }

            if ($('#txtCustodianOneId').val() == "" || $('#txtCustodianOneId').val() == null) {
                alert("Please Search Query first");
                $("#ForQuestion").removeClass("ForQuestion");
                return;
            }
            if (FromDate == ToDate) {

                var Count = $("#txtClickCount").val();

                {
                    Count = parseInt(Count) + 1;
                    $("#txtClickCount").val(Count);
                }

                $("#ForQuestion").addClass("ForQuestion");
                var CustodianOne = $('#txtCustodianOneId').val();
                var CustodianTwo = $('#txtCustodianTwoId').val();
                var CustodianATMID = $('#txtCustodianATMID').val();
                var CustodianRouteNo = $('#txtCustodianRouteNo').val();
                var CustodianDate = $('#txtCustodianDate').val();
                var CustodianOneName = $('#txtCustodianOneName').val();
                var CustodianTwoName = $('#txtCustodianTwoName').val();
                var Branch = $('#txtCustodianBranch').val();

                $('#txtQuestionATM').text(CustodianATMID);
                $('#txtQuestionRouteNo').text(CustodianRouteNo);
                $('#txtQuestionDate').text(CustodianDate);
                $('#txtQuestionCustiodianOneId').text(CustodianOne);
                $('#txtQuestionCustiodianTwoId').text(CustodianTwo);
                $('#txtQuestionCustiodianOneName').text(CustodianOneName);
                $('#txtQuestionCustiodianTwoName').text(CustodianTwoName);


                $.ajax({
                    url: '@Url.Action("RandomQuestion")',
                    data: {
                        CustodianIdOne: CustodianOne,
                        CustodianIdTwo: CustodianTwo,
                        Branch: Branch,
                    },
                    dataType: "json",
                    type: "POST",
                    traditional: true,
                    success: function (data) {
                        console.log(data);
                        $('#txtQuestionCustiodianOneQ1').text(data[0].CustodianOneQ1);
                        $('#txtQuestionCustiodianOneQ2').text(data[0].CustodianOneQ2);
                        $('#txtQuestionCustiodianOneQ3').text(data[0].CustodianTwoQ1);
                        $('#txtQuestionCustiodianOneQ4').text(data[0].CustodianTwoQ2);
                    },
                    complete: function () {
                    },
                    error: function (response) {
                        alert(response.responseText);
                    },
                    failure: function (response) {
                        alert(response.responseText);
                    }
                });
            }
        })
    });
</script>*@

@* Question Mark Submit Button Click *@
@*<script>
    $(document).ready(function () {
        $("#btnQuestionSave").click(function () {
            var QuestionOneCheck = "No";
            var QuestionTwoCheck = "No";
            var QuestionThreeCheck = "No";
            var QuestionFourCheck = "No";

                if ($('#QuestionOne').is(':checked')) {
                    QuestionOneCheck = "Yes";
                }
                else {
                    alert('Please Check Checkbox for Question One');
                    $('#QuestionOne').focus();
                    return;
                }
                if ($('#QuestionTwo').is(':checked')) {
                    QuestionTwoCheck = "Yes";
                }
                else {
                    alert('Please Check Checkbox for Question Two');
                    $('#QuestionTwo').focus();
                    return;
                }

               if ( $('#QuestionThree').is(':checked')) {
                   QuestionThreeCheck = "Yes";
                }
                else {
                   alert('Please Check Checkbox for Question One');
                   $('#QuestionThree').focus();
                   return;
                }

               if ( $('#QuestionFour').is(':checked')) {
                   QuestionFourCheck = "Yes";
                }
                else {
                   alert('Please Check Checkbox for Question Two');
                   $('#QuestionFour').focus();
                   return;
                }
               var UserID = '@Session["UserId"]';

            $.ajax({
                url: '@Url.Action("SaveRandomQuestions")',
                data: {
                    QuestionOne: QuestionOneCheck,
                    QuestionTwo: QuestionTwoCheck,
                    QuestionThree: QuestionThreeCheck,
                    QuestionFour: QuestionFourCheck,
                    ATMId: $('#txtQuestionATM').text(),
                    Date: $('#txtQuestionDate').text(),
                    RouteNo: $('#txtQuestionRouteNo').text(),
                    CustodianOneQuestionOne: $('#txtQuestionCustiodianOneQ1').text(),
                    CustodianOneQuestionTwo: $('#txtQuestionCustiodianOneQ2').text(),
                    CustodianTwoQuestionOne: $('#txtQuestionCustiodianOneQ3').text(),
                    CustodianTwoQuestionTwo: $('#txtQuestionCustiodianOneQ4').text(),
                    Itefolrot: $('#txtItefolrot').val(),
                    UserID: UserID,
                },
                dataType: "json",
                type: "POST",
                traditional: true,
                success: function (data) {
                    console.log(data.Message);
                    if (data.Message == "Successfully Inserted") {
                        $('#btnQuestionClose').click();
                        $("#QuestionOne").prop("checked", false);
                        $("#QuestionTwo").prop("checked", false);
                        $("#QuestionThree").prop("checked", false);
                        $("#QuestionFour").prop("checked", false);
                    }
                    else {
                        $("#QuestionOne").prop("checked", false);
                        $("#QuestionTwo").prop("checked", false);
                        $("#QuestionThree").prop("checked", false);
                        $("#QuestionFour").prop("checked", false);
                    }
                },
                complete: function () {
                },
                error: function (response) {
                    alert(response.responseText);
                },
                failure: function (response) {
                    alert(response.responseText);
                }
            });
        });
    });
</script>*@

@* Question FLM Mark Button Click *@
@*<script>
    $(document).ready(function () {
        $("#FLMQuestion").click(function () {
            var FromDate = $("#txtFromDate").val();
            var ToDate = $("#txtToDate").val();

            if ($("#txtATMID").val() == "" || $("#txtATMID").val() == null) {
                alert("Please Enter ATM Id ");
                $("#ForFLMQuestion").removeClass("ForFLMQuestion");
                return;
            }

            if (FromDate != ToDate) {
                alert("Please Select Current Date Only");
                $("#ForFLMQuestion").removeClass("ForFLMQuestion");
                return;
            }

            if ($('#txtFLMATMId').val() == "" || $('#txtFLMATMId').val() == null) {
                alert("Please Search Query first");
                $("#ForFLMQuestion").removeClass("ForFLMQuestion");
                return;
            }
            if (FromDate == ToDate) {

                //var Count = $("#txtClickCount").val();
                //{
                //    Count = parseInt(Count) + 1;
                //    $("#txtClickCount").val(Count);
                //}

                $("#ForFLMQuestion").addClass("ForFLMQuestion ");
                var FLMATMId = $('#txtFLMATMId').val();
                var FLMDocketNumber = $('#txtFLMDocketNumber').val();
                var FLMDate = $('#txtFLMDate').val();

                $('#txtFLMQuestionATM').text(FLMATMId);
                $('#txtFLMQuestionDocket').text(FLMDocketNumber);
                $('#txtFLMQuestionDate').text(FLMDate);
                }
        })
    });
</script>*@

@* Question FLM Mark Submit Button Click *@
@*<script>
    $(document).ready(function () {
        $("#btnFLMQuestionSave").click(function () {
            var QuestionOneCheck = "No";
            var QuestionTwoCheck = "No";
            var QuestionThreeCheck = "No";
            var QuestionFourCheck = "No";

            if ($('#FLMQuestionOne').is(':checked')) {
                QuestionOneCheck = "Yes";
            }
            else {
                alert('Please Check Checkbox for Question One');
                $('#FLMQuestionOne').focus();
                return;
            }
            if ($('#FLMQuestionTwo').is(':checked')) {
                QuestionTwoCheck = "Yes";
            }
            else {
                alert('Please Check Checkbox for Question Two');
                $('#FLMQuestionTwo').focus();
                return;
            }

            if ($('#FLMQuestionThree').is(':checked')) {
                QuestionThreeCheck = "Yes";
            }
            else {
                alert('Please Check Checkbox for Question One');
                $('#FLMQuestionThree').focus();
                return;
            }

            if ($('#FLMQuestionFour').is(':checked')) {
                QuestionFourCheck = "Yes";
            }
            else {
                alert('Please Check Checkbox for Question Two');
                $('#FLMQuestionFour').focus();
                return;
            }
            var UserID = '@Session["UserId"]';

               $.ajax({
                   url: '@Url.Action("SaveFLMRandomQuestions")',
                   data: {

                    QuestionOne: QuestionOneCheck,
                    QuestionTwo: QuestionTwoCheck,
                    QuestionThree: QuestionThreeCheck,
                    QuestionFour: QuestionFourCheck,
                    ATMId: $('#txtFLMQuestionATM').text(),
                    DocketNumber: $('#txtFLMQuestionDocket').text(),
                    FLMDate: $('#txtFLMQuestionDate').text(),

                    CustodianOneQuestionOne: $('#txtFLMQuestionCustiodianOneQ1').text(),
                    CustodianOneQuestionTwo: $('#txtFLMQuestionCustiodianOneQ2').text(),
                    CustodianOneId: $('#txtFLMQuestionCustiodianOneId').text(),
                    CustodianOneName: $('#txtFLMQuestionCustiodianOneName').text(),
                    CustodianOnePhone: $('#txtFLMQuestionCustiodianOnePhone').val(),

                    CustodianTwoQuestionOne: $('#txtFLMQuestionCustiodianOneQ3').text(),
                    CustodianTwoQuestionTwo: $('#txtFLMQuestionCustiodianOneQ4').text(),
                    CustodianTwoId: $('#txtFLMQuestionCustiodianTwoId').text(),
                    CustodianTwoName: $('#txtFLMQuestionCustiodianTwoName').text(),
                    CustodianTwoPhone: $('#txtFLMQuestionCustiodianTwoPhone').val(),

                    UserID: UserID,
                },
                dataType: "json",
                type: "POST",
                traditional: true,
                success: function (data) {
                    console.log(data.Message);
                    if (data.Message == "Successfully Inserted") {
                        $('#btnQuestionClose').click();
                        $("#QuestionOne").prop("checked", false);
                        $("#QuestionTwo").prop("checked", false);
                        $("#QuestionThree").prop("checked", false);
                        $("#QuestionFour").prop("checked", false);
                    }
                    else {
                        $("#QuestionOne").prop("checked", false);
                        $("#QuestionTwo").prop("checked", false);
                        $("#QuestionThree").prop("checked", false);
                        $("#QuestionFour").prop("checked", false);
                    }
                },
                complete: function () {
                },
                error: function (response) {
                    alert(response.responseText);
                },
                failure: function (response) {
                    alert(response.responseText);
                }
            });
        });
    });
</script>*@

@* Question FLM Mark On Search Button Click *@
@*<script>
    $(document).ready(function () {
        $("#btnFlmSearch").click(function () {
            $.ajax({
                url: '@Url.Action("FLMRandomQuestion")',
                data: {
                    CustodianPhoneNumber1: $("#txtFLMQuestionCustiodianOnePhone").val(),
                    CustodianPhoneNumber2: $("#txtFLMQuestionCustiodianTwoPhone").val(),
                },
                dataType: "json",
                type: "POST",
                traditional: true,
                success: function (data) {
                    $('#txtFLMQuestionCustiodianOneQ1').text(data[0].CustodianOneQ1);
                    $('#txtFLMQuestionCustiodianOneQ2').text(data[0].CustodianOneQ2);
                    $('#txtFLMQuestionCustiodianOneId').text(data[0].CustodianOneId);
                    $('#txtFLMQuestionCustiodianOneName').text(data[0].CustodianOneName);

                    $('#txtFLMQuestionCustiodianOneQ3').text(data[0].CustodianTwoQ1);
                    $('#txtFLMQuestionCustiodianOneQ4').text(data[0].CustodianTwoQ2);
                    $('#txtFLMQuestionCustiodianTwoId').text(data[0].CustodianTwoId);
                    $('#txtFLMQuestionCustiodianTwoName').text(data[0].CustodianTwoName);
                },
                complete: function () {
                },
                error: function (response) {
                    alert(response.responseText);
                },
                failure: function (response) {
                    alert(response.responseText);
                }
            });
        });
    });
</script>*@

@* Find tr row Details Route details to find last 3 otc details from Sco database*@
<script type="text/javascript">
    var UserID = '@Session["UserId"]';
    $("#myDatatable").on("click", "td:nth-child(8)", function () {
        //$("#myDatatable").on("click", ".Click", function () {

        $("#ModalTitle").text("Last 3 OTC On This Route");

        var Date = ($(this).closest('tr').find('td').eq(0).text());
        var Branch = ($(this).closest('tr').find('td').eq(2).text());
        var RouteNo = ($(this).closest('tr').find('td').eq(7).text());
        //alert(Date + " " + Branch + " " + RouteNo);
        GetLastThreeOtcDetails(Date, Branch, RouteNo);

    });
</script>

@* Table Row for getting value *@
@*<script>
    var UserID = '@Session["UserId"]';
    $("#myDatatableFLM").on("click", "td:nth-child(4)", function () {
        //$("#myDatatable").on("click", ".Click", function () {
        $("#ModalTitle").text("Last 3 FLM OTC On This Route");
        var Date = ($(this).closest('tr').find('td').eq(1).text());
        var Branch = ($(this).closest('tr').find('td').eq(4).text());
        var RouteNo = ($(this).closest('tr').find('td').eq(3).text());
        //alert(Date + " " + Branch + " " + RouteNo);
        GetLastThreeFLMOtcDetails(Date, Branch, RouteNo);

    });
</script>*@

@* Search last 3 OTC FLM *@
@*<script>
    function GetLastThreeFLMOtcDetails(Date, Branch, RouteNo) {
        $.ajax({
            url: '@Url.Action("SearchLast3FLMOTCDetails")',
            data: {
                Date: Date,
                Route: RouteNo,
                Branch: Branch,
            },
            dataType: "json",
            type: "POST",
            traditional: true,
            success: function (data) {
                console.log(data);

                $("#myDatatableLastOtc").find("tr:not(:first)").remove();
                var trHTML = '';

                $.each(data, function (i, item) {
                    if (data[i].Slno == '1') {
                        trHTML += '<tr style="font-size: 11px;"><td>' + data[i].ATMID + '</td>' +
                                                       '<td>' + data[i].Branch + '</td>' +
                                                       '<td>' + data[i].RouteNo + '</td>' +
                                                       '<td>' + data[i].Activity + '</td>' +
                                                       '<td>' + data[i].Crew1Name + '</td>' +
                                                       '<td>' + data[i].Crew1Regno + '</td>' +
                                                       '<td>' + data[i].Crew2Name + '</td>' +
                                                       '<td>' + data[i].Crew2Regno + '</td>' +
                                                       '<td style="color:red ; font-weight: bold;">' + data[i].LastOTCTaken + '</td>' +
                                                       '<td>' + data[i].CallerNumber + '</td>' +
                                                       '<td>' + data[i].RouteKeyName + '</td>' +
                                                       '<td>' + data[i].CombinationNo + '</td>' +
                                                       '<td>' + data[i].RemarksOne + '</td>' +
                                                       '<td>' + data[i].RemarksTwo + '</td>' +

                                                 '</tr>';
                    }
                    if (data[i].Slno == '2') {
                        trHTML += '<tr style="font-size: 11px;"><td>' + data[i].ATMID + '</td>' +
                                                       '<td>' + data[i].Branch + '</td>' +
                                                       '<td>' + data[i].RouteNo + '</td>' +
                                                       '<td>' + data[i].Activity + '</td>' +
                                                       '<td>' + data[i].Crew1Name + '</td>' +
                                                       '<td>' + data[i].Crew1Regno + '</td>' +
                                                       '<td>' + data[i].Crew2Name + '</td>' +
                                                       '<td>' + data[i].Crew2Regno + '</td>' +
                                                       '<td style="color:orange ;font-weight: bold; ">' + data[i].LastOTCTaken + '</td>' +
                                                       '<td>' + data[i].CallerNumber + '</td>' +
                                                       '<td>' + data[i].RouteKeyName + '</td>' +
                                                       '<td>' + data[i].CombinationNo + '</td>' +
                                                       '<td>' + data[i].RemarksOne + '</td>' +
                                                       '<td>' + data[i].RemarksTwo + '</td>' +

                                                 '</tr>';
                    }
                    if (data[i].Slno == '3') {
                        trHTML += '<tr style="font-size: 11px;"><td>' + data[i].ATMID + '</td>' +
                                                       '<td>' + data[i].Branch + '</td>' +
                                                       '<td>' + data[i].RouteNo + '</td>' +
                                                       '<td>' + data[i].Activity + '</td>' +
                                                       '<td>' + data[i].Crew1Name + '</td>' +
                                                       '<td>' + data[i].Crew1Regno + '</td>' +
                                                       '<td>' + data[i].Crew2Name + '</td>' +
                                                       '<td>' + data[i].Crew2Regno + '</td>' +
                                                       '<td style="color:green ; font-weight: bold;">' + data[i].LastOTCTaken + '</td>' +
                                                       '<td>' + data[i].CallerNumber + '</td>' +
                                                       '<td>' + data[i].RouteKeyName + '</td>' +
                                                       '<td>' + data[i].CombinationNo + '</td>' +
                                                       '<td>' + data[i].RemarksOne + '</td>' +
                                                       '<td>' + data[i].RemarksTwo + '</td>' +

                                                 '</tr>';
                    }
                });

                $('#myDatatableLastOtc').append(trHTML);
                //$("#btnSearch").click();
                //alert(data.Message);
            },
            error: function (response) {
                alert(response.responseText);
            },
            failure: function (response) {
                alert(response.responseText);
            }
        });
    }
</script>*@

@* Search last 3 OTC SCO *@
@*<script>
    function GetLastThreeOtcDetails(Date, Branch, RouteNo)
    {
        $.ajax({
            url: '@Url.Action("SearchLast3OTCDetails")',
            data: {
                Date: Date,
                Route: RouteNo,
                Branch: Branch,
            },
            dataType: "json",
            type: "POST",
            traditional: true,
            success: function (data) {
                console.log(data);

                $("#myDatatableLastOtc").find("tr:not(:first)").remove();
                var trHTML = '';

                $.each(data, function (i, item) {
                    if (data[i].Slno == '1') {
                        trHTML += '<tr style="font-size: 11px;"><td>' + data[i].ATMID + '</td>' +
                                                       '<td>' + data[i].Branch + '</td>' +
                                                       '<td>' + data[i].RouteNo + '</td>' +
                                                       '<td>' + data[i].Activity + '</td>' +
                                                       '<td>' + data[i].Crew1Name + '</td>' +
                                                       '<td>' + data[i].Crew1Regno + '</td>' +
                                                       '<td>' + data[i].Crew2Name + '</td>' +
                                                       '<td>' + data[i].Crew2Regno + '</td>' +
                                                       '<td style="color:red ; font-weight: bold;">' + data[i].LastOTCTaken + '</td>' +
                                                       '<td>' + data[i].CallerNumber + '</td>' +
                                                       '<td>' + data[i].RouteKeyName + '</td>' +
                                                       '<td>' + data[i].CombinationNo + '</td>' +
                                                       '<td>' + data[i].RemarksOne + '</td>' +
                                                       '<td>' + data[i].RemarksTwo + '</td>' +

                                                 '</tr>';
                    }
                    if (data[i].Slno == '2') {
                        trHTML += '<tr style="font-size: 11px;"><td>' + data[i].ATMID + '</td>' +
                                                       '<td>' + data[i].Branch + '</td>' +
                                                       '<td>' + data[i].RouteNo + '</td>' +
                                                       '<td>' + data[i].Activity + '</td>' +
                                                       '<td>' + data[i].Crew1Name + '</td>' +
                                                       '<td>' + data[i].Crew1Regno + '</td>' +
                                                       '<td>' + data[i].Crew2Name + '</td>' +
                                                       '<td>' + data[i].Crew2Regno + '</td>' +
                                                       '<td style="color:orange ;font-weight: bold; ">' + data[i].LastOTCTaken + '</td>' +
                                                       '<td>' + data[i].CallerNumber + '</td>' +
                                                       '<td>' + data[i].RouteKeyName + '</td>' +
                                                       '<td>' + data[i].CombinationNo + '</td>' +
                                                       '<td>' + data[i].RemarksOne + '</td>' +
                                                       '<td>' + data[i].RemarksTwo + '</td>' +

                                                 '</tr>';
                    }
                    if (data[i].Slno == '3') {
                        trHTML += '<tr style="font-size: 11px;"><td>' + data[i].ATMID + '</td>' +
                                                       '<td>' + data[i].Branch + '</td>' +
                                                       '<td>' + data[i].RouteNo + '</td>' +
                                                       '<td>' + data[i].Activity + '</td>' +
                                                       '<td>' + data[i].Crew1Name + '</td>' +
                                                       '<td>' + data[i].Crew1Regno + '</td>' +
                                                       '<td>' + data[i].Crew2Name + '</td>' +
                                                       '<td>' + data[i].Crew2Regno + '</td>' +
                                                       '<td style="color:green ; font-weight: bold;">' + data[i].LastOTCTaken + '</td>' +
                                                       '<td>' + data[i].CallerNumber + '</td>' +
                                                       '<td>' + data[i].RouteKeyName + '</td>' +
                                                       '<td>' + data[i].CombinationNo + '</td>' +
                                                       '<td>' + data[i].RemarksOne + '</td>' +
                                                       '<td>' + data[i].RemarksTwo + '</td>' +

                                                 '</tr>';
                    }
                });

                $('#myDatatableLastOtc').append(trHTML);
                //$("#btnSearch").click();
                //alert(data.Message);
            },
            error: function (response) {
                alert(response.responseText);
            },
            failure: function (response) {
                alert(response.responseText);
            }
        });
    }
</script>*@

@* On Manual Generate OTC Lock Click *@
@*<script>
    $(document).ready(function () {
        var UserID = '@Session["UserId"]';
        $("#btnGenerate").click(function () {
            if ($("#txtManualATMID").val() == "" || $("#txtManualATMID").val() == null) {
                alert("Please Enter ATM ID First");
                $("#txtManualATMID").focus();
                return;
            }

            if ($("#txtRouteKeyName").val() == "" || $("#txtRouteKeyName").val() == null) {
                alert("Please Enter Route Key Name");
                $("#txtRouteKeyName").focus();
                return;
            }
            $.ajax({
                url: '@Url.Action("GetCompany")',
                 data: {
                     ATMID: $("#txtManualATMID").val(),
                 },
                 dataType: "json",
                 type: "POST",
                 traditional: true,
                 success: function (data) {
                     company = data[0].Company;
                     if (company.length == 0) {
                         alert("Please Enter Correct ATM ID");
                         $('#loading-image').hide();
                         $('#cover').hide();
                         return;
                     }
            $.ajax({
                url: '@Url.Action("RetriveATMLock")',
                data: {
                    ATMID: $("#txtManualATMID").val(),
                    RouteKeyName: $("#txtRouteKeyName").val(),
                    Company: company,
                    UserId: UserID,
                    TimeBlock: $("#ddlOtherTimeBlock").val(),
                    LockStatus: $("#ddlOtherLockStatus").val(),
                },
                dataType: "json",
                type: "POST",
                traditional: true,
                success: function (data) {
                    if (data.Msg == "Error") {
                        alert(data.OTC);
                        return;
                    }
                    else {
                        $("#txtCombinationNo").prop("disabled", false);
                        $("#txtCallerNumber").prop("disabled", false);
                    }
                    if (data.Msg == "OK") {
                        $("#txtCombinationNo").val(data.OTC);
                        $("#txtCombinationNo").prop("disabled", true);
                        $("#txtCallerNumber").val(data.CallerNo);
                        $("#txtCallerNumber").prop("disabled", true);
                    }
                    else {
                        $("#txtCombinationNo").prop("disabled", false);
                        $("#txtCallerNumber").prop("disabled", false);
                    }
                },
                complete: function () {
                },
                error: function (response) {
                    alert(response.responseText);
                },
                failure: function (response) {
                    alert(response.responseText);
                }
            });
                 },
                complete: function () {
                },
                error: function (response) {
                    $('#loading-image').hide();
                    $('#cover').hide();
                    alert(response.responseText);
                },
                failure: function (response) {
                    $('#loading-image').hide();
                    $('#cover').hide();
                    alert(response.responseText);
                }
            });
        });
    });
</script>*@

@*On Click Row Value get Route Key Value*@
<script>
    var RowIndex;
    var RouteNameStr;
    var strClassName;
    function TakeRouteKeyName(RowId, event, ClassName) {
        RowIndex = RowId;
        RouteNameStr = event.target.value;
        strClassName = ClassName;
        //var i = 1234;
        //$(".FlmCallerNumber").val(i);
        //$("#myDatatable").on("click", "td:nth-child(17)", function () {

        //    RowIndex = RowId;
        //    RouteNameStr=RouteName.target.value;
        //    alert(RouteNameStr);
        //});

    }
</script>

@*Update Value On Click OTC Generate Button*@
@*<script>
    $(document).ready(function () {
        var UserID = '@Session["UserId"]';
        $("#btnSCOOTCGenerate").click(function () {
            if ($("#txtATMID").val() == "" || $("#txtATMID").val() == null) {
                alert("Please Enter ATM ID First");
                return;
            }

            if (RouteNameStr == "" || RouteNameStr == null) {
                alert("Please Enter Route Key Name");
                return;
            }

            if (TimeStampStr == "" || TimeStampStr == null) {
                TimeStampStr = 4;
            }

            if (LockStatusStr == "" || LockStatusStr == null) {
                LockStatusStr = 0;
                //return;
            }
            $('#loading-image').show();
            $('#cover').show();

            var r = "#myDatatable #" + RowIndex;
            var s = "#myDatatableFLM #" + RowIndex;

            $.ajax({
                url: '@Url.Action("GetCompany")',
                data: {
                    ATMID: $("#txtATMID").val(),
                },
                dataType: "json",
                type: "POST",
                traditional: true,
                success: function (data) {
                    company = data[0].Company;
                    if (company.length == 0) {
                        alert("Please Enter Correct ATM ID");
                        $('#loading-image').hide();
                        $('#cover').hide();
                        return;
                    }

                    $.ajax({
                        url: '@Url.Action("RetriveATMLock")',
                         data: {
                             ATMID: $("#txtATMID").val(),
                             RouteKeyName: RouteNameStr,
                             Company: data[0].Company,
                             UserId: UserID,
                             TimeBlock: TimeStampStr,
                             LockStatus: LockStatusStr,
                         },
                         dataType: "json",
                         type: "POST",
                         traditional: true,
                         success: function (data) {
                             if (data.Msg == "Error") {
                                 $('#loading-image').hide();
                                 $('#cover').hide();
                                 //if (strClassName == "RouteKeyName") {
                                 //    $(r).find('.CombinationNo').val(data.OTC);
                                 //    $(r).find('.CallerNumber').val(data.CallerNo);
                                 //    $('#loading-image').hide();
                                 //    $('#cover').hide();
                                 //}

                                 //if (strClassName == "FLMRouteKeyName") {
                                 //    $(s).find('.FLMCombinationNo').val(data.OTC);
                                 //    $(s).find('.FlmCallerNumber').val(data.CallerNo);
                                 //    $('#loading-image').hide();
                                 //    $('#cover').hide();
                                 //}
                                 alert(data.OTC);
                                 return;
                             }
                             if (data.Msg == "OK") {
                                 if (strClassName == "RouteKeyName") {
                                     $(r).find('.CombinationNo').val(data.OTC);
                                     $(r).find('.CallerNumber').val(data.CallerNo);
                                     $('#loading-image').hide();
                                     $('#cover').hide();
                                 }

                                 if (strClassName == "FLMRouteKeyName") {
                                     $(s).find('.FLMCombinationNo').val(data.OTC);
                                     $(s).find('.FlmCallerNumber').val(data.CallerNo);
                                     $('#loading-image').hide();
                                     $('#cover').hide();
                                 }

                             }

                         },
                         complete: function () {
                         },
                         error: function (response) {
                             $('#loading-image').hide();
                             $('#cover').hide();
                             alert(response.responseText);
                         },
                         failure: function (response) {
                             $('#loading-image').hide();
                             $('#cover').hide();
                             alert(response.responseText);
                         }
                     });
                 },
                complete: function () {
                },
                error: function (response) {
                    $('#loading-image').hide();
                    $('#cover').hide();
                    alert(response.responseText);
                },
                failure: function (response) {
                    $('#loading-image').hide();
                    $('#cover').hide();
                    alert(response.responseText);
                }
            });

        })
    })
</script>*@

@* On Click Row Value get Time stamp *@
<script>
    var TimeStampRowIndex;
    var TimeStampStr;
    var TimeStampClassName;

    var LockStatusRowIndex;
    var LockStatusStr;
    var LockStatusClassName;

    function TakeTimeBlock(RowId, RouteName, ClassName) {
        TimeStampRowIndex = RowId;
        TimeStampStr = RouteName.target.value;
        TimeStampClassName = ClassName;
    }

    function TakeLockStatus(RowId, RouteName, ClassName) {
        LockStatusRowIndex = RowId;
        LockStatusStr = RouteName.target.value;
        LockStatusClassName = ClassName;
    }
</script>


<script>

    $(document).ready(function () {
        function disableBack() { window.history.forward(); }

        window.onload = disableBack();
        window.onpageshow = function (evt) { if (evt.persisted) disableBack() }
    });

</script>
