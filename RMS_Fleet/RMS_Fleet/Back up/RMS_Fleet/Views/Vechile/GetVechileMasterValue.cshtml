@{
    ViewBag.Title = "GetVechileMasterValue";
    Layout = "~/Views/Shared/Master.cshtml";
}

@*<h2>GetVechileMasterValue</h2>*@
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">

<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>

<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />

<!DOCTYPE html>
<html>
<head>
    <title>Page Title</title>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-sm-12">

                @foreach (var item in Model)
                {
                    <div style="padding: 9.5px; margin: 0 0 10px; line-height: 1.42857143; color: #333; border: 1px solid #ccc; border-radius: 4px;">

                    <div class="row">
                        <div class="col-sm-3">
                            <label for="VechileName" class="control-label">Vehicle Number</label>
                            <input type="text" class="form-control" placeholder="Enter Vehicle Number" id="txtEditVehicleNo" name="txtEditVehicleNo" value="@item.VehicleNumber" />
                        </div>
                        <div class="col-sm-3">
                            <label for="Make" class="control-label">Make</label>
                            <input type="text" class="form-control" placeholder="Enter Make Details" id="txtEditMake" name="txtEditMake" value="@item.Make" />
                        </div>
                        <div class="col-sm-3">
                            <label for="ChassisNo" class="control-label">Chassis Number</label>
                            <input type="text" class="form-control" placeholder="Enter Chassis NUmber" id="txtEditChassisNo" name="txtEditChassisNo" value="@item.ChassisNumber" />
                        </div>
                        <div class="col-sm-3">
                            <label for="ManufacturingYear" class="control-label">Manufacturing Year</label>
                            <input type="text" class="form-control" placeholder="Enter Manufacturing Year" id="txtEditManufacturingYear" name="txtEditManufacturingYear" maxlength="4" value="@item.ManufacturingYear" />
                        </div>
                    </div>
                    <p></p> 
                    <div class="row">
                        <div class="col-sm-3">
                            <label for="Password" class="control-label">Password</label>
                            <input type="text" class="form-control" placeholder="Enter Password" id="txtEditPassword" name="txtEditPassword"  value="@item.Password"/>
                        </div>
                        <div class="col-sm-3">
                            <label for="Region" class="control-label">Region</label>
                            <select class="form-control" id="cmbRegion" name="cmbRegion">
                                @foreach (var item1 in ViewBag.Region)
                                {
                                    
                                    if(@item.Region == @item1.RegionName)
                                    {                                       
                                        <option value="@item1.RegionId" selected>@item1.RegionName</option>
                                    }
                                    else
                                    {
                                        <option value="@item1.RegionId">@item1.RegionName</option>
                                    } 
                                }
                            </select>
                        </div>
                        <div class="col-sm-3">
                            <label for="Branch" class="control-label">Branch</label>
                            <select class="form-control" id="cmbBranch" name="cmbBranch">                                    
                                 <option value="@item.BranchId" selected>@item.BranchName</option>
                            </select>
                            <input type="hidden" value="@item.Recid" id="Recidvalue" class="form-control"/>
                        </div>
                        <div class="col-sm-3">
                            <label for="PetroCardNumber" class="control-label">Petro Card Number</label>
                            <input type="text" class="form-control" placeholder="Enter Chassis NUmber" id="txtPetroCardNumber" name="txtPetroCardNumber" value="@item.PetroCardNumber" />
                        </div>
                    </div>
                    <p></p>
                    <div class="row">
                        <div class="col-sm-3">
                             <label for="STDKMPL" class="control-label">STD KMPL</label>
                             <input type="text" class="form-control" placeholder="Enter Manufacturing Year" id="txtSTDKMPL" name="txtSTDKMPL"  value="@item.STDKMPL" />
                        </div>
                        <div class="col-sm-3">
                             <label for="BPNONBP" class="control-label">BP/NON BP</label>
                             <select class="form-control" id="cmbBPNONBP" name="cmbBPNONBP">
                                 @if (item.BPNONBP != "")
                                 {

                                    if (item.BPNONBP == "BP")
                                    {                              
                                     <option value="BP" selected>BP</option>
                                     <option value="NON BP">NON BP</option>
                                     <option value="BP AC">BP AC</option>
                                     <option value="NON BP AC">NON BP AC</option>
                                    }

                                    else if (item.BPNONBP == "NON BP")
                                    {
                                     <option value="NON BP" selected>NON BP</option>
                                     <option value="BP">BP</option>
                                     <option value="BP AC">BP AC</option>
                                     <option value="NON BP AC">NON BP AC</option>
                                    }

                                    else if (item.BPNONBP == "BP AC")
                                    {
                                     <option value="BP AC" selected>BP AC</option>
                                     <option value="BP">BP</option>
                                     <option value="NON BP">NON BP</option>
                                     <option value="NON BP AC">NON BP AC</option>
                                    }

                                    else if (item.BPNONBP == "NON BP AC")
                                    {
                                     <option value="NON BP AC" selected>NON BP AC</option>
                                     <option value="BP">BP</option>
                                     <option value="NON BP">NON BP</option>
                                     <option value="BP AC">BP AC</option>
                                    }

                                    else
                                    {
                                     <option value="BP">BP</option>
                                     <option value="NON BP">NON BP</option>
                                     <option value="BP AC">BP AC</option>
                                     <option value="NON BP AC">NON BP AC</option>
                                    }

                                 }
                                 else
                                 {
                                     <option value="">-- Select --</option>
                                     <option value="BP">BP</option>
                                     <option value="NON BP">NON BP</option>
                                     <option value="BP AC">BP AC</option>
                                     <option value="NON BP AC">NON BP AC</option>
                                 }
                             </select>
                        </div>
                        <div class="col-sm-3">
                            <label for="FuelType" class="control-label">Fuel Type</label>
                             <select class="form-control" id="cmbFuelType" name="cmbFuelType"> 
                                 @if (item.FuelType == "Petrol")
                                 {                                   
                                     <option value="Petrol" selected>Petrol</option>
                                     <option value="Diesel">Diesel</option>
                                     <option value="Cng">CNG</option>
                                 }
                                 @if (item.FuelType == "Diesel")
                                 {
                                     <option value="Diesel" selected>Diesel</option>
                                     <option value="Petrol">Petrol</option>
                                     <option value="Cng">CNG</option>
                                 }
                                 @if (item.FuelType == "Cng")
                                 {
                                     <option value="Cng" selected>CNG</option>
                                     <option value="Petrol">Petrol</option>
                                     <option value="Diesel">Diesel</option>
                                 }
                                 @if (item.FuelType == "")
                                 {
                                     <option value="">-- Select --</option>
                                     <option value="Cng">CNG</option>
                                     <option value="Petrol">Petrol</option>
                                     <option value="Diesel">Diesel</option>
                                 }
                             </select>
                        </div>
                        <div class="col-sm-3"></div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-success" id="Update">Update</button>
                        <button type="button" class="btn btn-warning" data-dismiss="modal" id="btnClose" onclick="javascript:window.open('','_self').close();">Close</button>
                    </div>

                    </div>
                }

            </div>
        </div>
    </div>
</body>
    <script>
        $(document).ready(function () {
            $('#cmbRegion').change(function () {
                $.ajax({
                    url: '@Url.Action("GetBranchdetails")',
                     data: {
                         RegionId: $('#cmbRegion').val(),
                     },
                     dataType: "json",
                     type: "POST",
                     traditional: true,
                     success: function (data) {
                         var mySelect = $('#cmbBranch');
                         mySelect.empty();
                         $.each(data, function (i) {
                             var optionhtml = '';
                             optionhtml = '<option value="' + data[i].BranchId + '">' + data[i].BranchName + '</option>';
                                 $('#cmbBranch').append(optionhtml);
                         });
                },
                     error: function (response) {
                         alert(response.responseText);
                     },
                     failure: function (response) {
                         alert(response.responseText);
                     }
                 });
            });

        });
    </script>

    <script>
        $(document).ready(function () {
            $('#Update').click(function () {

                if ($('#txtPetroCardNumber').val() == "" || $('#txtPetroCardNumber').val() == null)
                {
                    alert("Please Enter Petro Card Number Details!!");
                    $('#txtPetroCardNumber').focus();
                    return;
                }
                if ($('#txtSTDKMPL').val() == "" || $('#txtSTDKMPL').val() == null) {
                    alert("Please Enter STDKMPL Details !!");
                    $('#txtSTDKMPL').focus();
                    return;
                }
                if ($('#cmbBPNONBP').val() == "" || $('#cmbBPNONBP').val() == "-- Select --") {
                    alert("Please Enter BP/NONBP Details !!");
                    $('#cmbBPNONBP').focus();
                    return;
                }
                if ($('#cmbFuelType').val() == "" || $('#cmbFuelType').val() == "-- Select --") {
                    alert("Please Enter Fuel Type Details !!");
                    $('#cmbFuelType').focus();
                    return;
                }
                $.ajax({
                    url: '@Url.Action("GetVechileDataUpdate")',
                    data: {
                        RecId: $('#Recidvalue').val(),
                        VechileNumber: $('#txtEditVehicleNo').val(),
                        Make: $('#txtEditMake').val(),
                        ChassisNo: $('#txtEditChassisNo').val(),
                        ManufacturingYear: $('#txtEditManufacturingYear').val(),
                        Password: $('#txtEditPassword').val(),
                        Region: $('#cmbRegion').val(),
                        Branch: $('#cmbBranch').val(),
                        PetroCardNumber: $('#txtPetroCardNumber').val(),
                        STDKMPL: $('#txtSTDKMPL').val(),
                        BPNONBP: $('#cmbBPNONBP').val(),
                        FuelType: $('#cmbFuelType').val(),
                    },
                    dataType: "json",
                    type: "POST",
                    traditional: true,
                    success: function (data) {
                        alert(data);
                    },
                    error: function (response) {
                        alert(response.responseText);
                    },
                    failure: function (response) {
                        alert(response.responseText);
                    }
                });
            })
        });
    </script>
</html>
